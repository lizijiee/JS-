{"ast":null,"code":"import _regeneratorRuntime from \"F:\\\\App Store\\\\Coding\\\\Github_Download\\\\JS-\\\\React\\u9879\\u76EE\\\\react-mall\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"F:\\\\App Store\\\\Coding\\\\Github_Download\\\\JS-\\\\React\\u9879\\u76EE\\\\react-mall\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"F:\\\\App Store\\\\Coding\\\\Github_Download\\\\JS-\\\\React\\u9879\\u76EE\\\\react-mall\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"F:\\\\App Store\\\\Coding\\\\Github_Download\\\\JS-\\\\React\\u9879\\u76EE\\\\react-mall\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"F:\\\\App Store\\\\Coding\\\\Github_Download\\\\JS-\\\\React\\u9879\\u76EE\\\\react-mall\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"F:\\\\App Store\\\\Coding\\\\Github_Download\\\\JS-\\\\React\\u9879\\u76EE\\\\react-mall\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"F:\\\\App Store\\\\Coding\\\\Github_Download\\\\JS-\\\\React\\u9879\\u76EE\\\\react-mall\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"F:\\\\App Store\\\\Coding\\\\Github_Download\\\\JS-\\\\React\\u9879\\u76EE\\\\react-mall\\\\src\\\\components\\\\Content\\\\Food\\\\List\\\\EditClick\\\\Edit.js\";\nimport React, { Component } from 'react';\nimport { Form, Select, Modal, Button, Input, message } from 'antd';\nimport { withRouter } from 'react-router-dom';\nimport './Edit.less';\nvar Option = Select.Option;\nvar confirm = Modal.confirm;\nvar FormItem = Form.Item;\nvar title = [\"姓名\", \"身份证号\", \"出生年月\", \"年龄\", \"入职时间\", \"职位\"];\n\nvar success = function success() {\n  message.success('The information is changed');\n};\n\nvar error = function error() {\n  message.error('Operation fails');\n};\n\nvar Temp =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Temp, _Component);\n\n  function Temp() {\n    _classCallCheck(this, Temp);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(Temp).apply(this, arguments));\n  }\n\n  _createClass(Temp, [{\n    key: \"handlePageClick\",\n    value: function handlePageClick() {\n      console.log(this.props.history.go(-1));\n    }\n  }, {\n    key: \"isObjectValueEqual\",\n    value: function isObjectValueEqual(a, b) {\n      //1.判断数据提交前后两对象value数值是否相等,\n      //2.相等的话返回true,进行数据请求,不想等的话返回不相等的key和value新对象\n      //3.取对象a和b的属性名\n      var aProps = Object.keys(a); // let bProps = Object.keys(b);  a、b的key值相同\n      //判断属性名的length是否一致\n      //表单两次提交内容对比不需要对length进行判断\n      //循环取出属性名，再判断属性值是否一致\n\n      for (var i = 0; i < aProps.length; i++) {\n        var propName = aProps[i];\n\n        if (a[propName] + \"\" !== b[propName] + \"\") {\n          //因为数据类型不一致所以转一下，不对数据类型进行判断\n          return false; //如果进入这里下面return不会执行\n        }\n      }\n\n      return true;\n    }\n  }, {\n    key: \"showConfirm\",\n    value: function showConfirm() {\n      var _this = this;\n\n      confirm({\n        wrapClassName: '提示',\n        title: '提示:',\n        content: '是否提交数据',\n        okText: '确认',\n        cancelText: '取消',\n        icon: \"info-circle\",\n        bodyStyle: {\n          \".ant-modal-confirm-btns\": {\n            marginTop: 0\n          }\n        },\n        onOk: function () {\n          var _onOk = _asyncToGenerator(\n          /*#__PURE__*/\n          _regeneratorRuntime.mark(function _callee() {\n            return _regeneratorRuntime.wrap(function _callee$(_context) {\n              while (1) {\n                switch (_context.prev = _context.next) {\n                  case 0:\n                    if (_this.isObjectValueEqual(_this.props.form.getFieldsValue(), _this.props.location.state[0])) {\n                      _context.next = 5;\n                      break;\n                    }\n\n                    _context.next = 3;\n                    return fetch(\"http://localhost:2000/pers?act=editClerks&&num=\".concat(_this.props.location.state[0].num), {\n                      method: 'POST',\n                      // mode: 'cors',\n                      // credentials: 'include', // cookie\n                      headers: {\n                        'Content-Type': 'application/json'\n                      },\n                      body: JSON.stringify(_this.props.form.getFieldsValue())\n                    }).then(function (res) {\n                      return res.json();\n                    }).then(function (data) {\n                      // this.setState({ ...data })\n                      console.log(data);\n                    });\n\n                  case 3:\n                    _context.next = 6;\n                    break;\n\n                  case 5:\n                    //进行修改直接跳转到列表页\n                    success();\n\n                  case 6:\n                    _this.props.history.push({\n                      //退回到列表页\n                      pathname: \"/pers/clerks\"\n                    });\n\n                  case 7:\n                  case \"end\":\n                    return _context.stop();\n                }\n              }\n            }, _callee, this);\n          }));\n\n          function onOk() {\n            return _onOk.apply(this, arguments);\n          }\n\n          return onOk;\n        }()\n        /* \r\n        onCancel() {  //取消回调函数\r\n          console.log('Cancel');\r\n        }, \r\n        */\n\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      //路由携带过来的数据\n      console.log(this.props.location.state); //获取对象中的所有keys数值;\n\n      var arr = Object.keys(this.props.location.state); //对所有keys数值进行过滤;\n\n      var TempArr = arr.filter(function (currentValue, index) {\n        return currentValue != \"num\" && currentValue != \"sex\" && currentValue != \"state\";\n      });\n      var _this$props$form = this.props.form,\n          getFieldProps = _this$props$form.getFieldProps,\n          getFieldError = _this$props$form.getFieldError,\n          isFieldValidating = _this$props$form.isFieldValidating,\n          getFieldDecorator = _this$props$form.getFieldDecorator;\n      var formItemLayout = {\n        //样式\n        // span是整体左移 pull是label左移   \n        labelCol: {\n          span: 6,\n          pull: 1\n        },\n        //左侧 offset:3\n        wrapperCol: {\n          span: 10\n        } //input 长度控制\n\n      };\n      return React.createElement(\"section\", {\n        className: \"clerk-info\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"wrap\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, React.createElement(Form, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, React.createElement(FormItem, Object.assign({\n        label: \"\\u63A8\\u8350\\u72B6\\u6001:\"\n      }, formItemLayout, {\n        required: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }), getFieldDecorator(\"state\", {\n        initialValue: this.props.location.state.categoryName\n      })(React.createElement(Select, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }, React.createElement(Option, {\n        value: \"\\u70ED\\u9500\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, \"\\u70ED\\u9500\"), React.createElement(Option, {\n        value: \"\\u63A8\\u8350\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }, \"\\u63A8\\u8350\"), React.createElement(Option, {\n        value: \"\\u6298\\u6263\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }, \"\\u6298\\u6263\")))), React.createElement(FormItem, {\n        style: {\n          display: \"inline-block\",\n          marginRight: 10,\n          marginTop: 10,\n          marginLeft: 160,\n          fontSize: 13,\n          borderRadius: 5,\n          textIndent: \"100px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177\n        },\n        __self: this\n      }, React.createElement(Button, {\n        ghost: \"true\",\n        type: \"primary\",\n        onClick: this.handlePageClick.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182\n        },\n        __self: this\n      }, \"\\u8FD4\\u56DE\")), React.createElement(FormItem, {\n        style: {\n          display: \"inline-block\",\n          marginTop: 10\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190\n        },\n        __self: this\n      }, React.createElement(Button, {\n        type: \"primary\",\n        htmlType: \"submit\",\n        style: {\n          display: \"inline-block\"\n        },\n        onClick: this.showConfirm.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193\n        },\n        __self: this\n      }, \"\\u63D0\\u4EA4\")))));\n    }\n  }]);\n\n  return Temp;\n}(Component);\n\nvar WrappedDemo = Form.create({\n  name: 'validate_other'\n})(Temp);\nexport default withRouter(WrappedDemo); // export default Temp","map":{"version":3,"sources":["F:\\App Store\\Coding\\Github_Download\\JS-\\React项目\\react-mall\\src\\components\\Content\\Food\\List\\EditClick\\Edit.js"],"names":["React","Component","Form","Select","Modal","Button","Input","message","withRouter","Option","confirm","FormItem","Item","title","success","error","Temp","console","log","props","history","go","a","b","aProps","Object","keys","i","length","propName","wrapClassName","content","okText","cancelText","icon","bodyStyle","marginTop","onOk","isObjectValueEqual","form","getFieldsValue","location","state","fetch","num","method","headers","body","JSON","stringify","then","res","json","data","push","pathname","arr","TempArr","filter","currentValue","index","getFieldProps","getFieldError","isFieldValidating","getFieldDecorator","formItemLayout","labelCol","span","pull","wrapperCol","initialValue","categoryName","display","marginRight","marginLeft","fontSize","borderRadius","textIndent","handlePageClick","bind","showConfirm","WrappedDemo","create","name"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport {\r\n  Form, Select, Modal, Button, Input, message\r\n} from 'antd';\r\nimport {withRouter } from 'react-router-dom';\r\nimport './Edit.less';\r\n\r\nconst { Option } = Select;\r\nconst confirm = Modal.confirm;\r\nconst FormItem = Form.Item;\r\nconst title = [\"姓名\", \"身份证号\", \"出生年月\", \"年龄\", \"入职时间\", \"职位\"];\r\nconst success = () => {\r\n  message.success('The information is changed');\r\n};\r\n\r\nconst error = () => {\r\n  message.error('Operation fails');\r\n};\r\n\r\nclass Temp extends Component {\r\n \r\n  handlePageClick() {\r\n    console.log(this.props.history.go(-1))\r\n  }\r\n  isObjectValueEqual(a, b) {\r\n    //1.判断数据提交前后两对象value数值是否相等,\r\n    //2.相等的话返回true,进行数据请求,不想等的话返回不相等的key和value新对象\r\n    //3.取对象a和b的属性名\r\n    let aProps = Object.keys(a);\r\n    // let bProps = Object.keys(b);  a、b的key值相同\r\n    //判断属性名的length是否一致\r\n    //表单两次提交内容对比不需要对length进行判断\r\n\r\n    //循环取出属性名，再判断属性值是否一致\r\n    for (var i = 0; i < aProps.length; i++) {\r\n      var propName = aProps[i];\r\n      if (a[propName] + \"\" !== b[propName] + \"\") {\r\n        //因为数据类型不一致所以转一下，不对数据类型进行判断\r\n        return false;//如果进入这里下面return不会执行\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n\r\n  showConfirm() {\r\n    confirm({\r\n      wrapClassName: '提示',\r\n      title: '提示:',\r\n      content: '是否提交数据',\r\n      okText: '确认',\r\n      cancelText: '取消',\r\n      icon: \"info-circle\",\r\n      bodyStyle: {\r\n        \".ant-modal-confirm-btns\": { marginTop: 0 }\r\n      },\r\n      onOk: async () => { // 箭头函数解决this\r\n        if (!this.isObjectValueEqual(this.props.form.getFieldsValue(), this.props.location.state[0])) {\r\n\r\n          //表单内容修改后,进入判断。 \r\n          //思路：把num=？ 传入后台在后台进行查找相应的内容  \r\n          \r\n          //post 请求发送body时请求头必须改为'Content-Type': 'application/json'\r\n         \r\n          // 请求默认为： Content-Type: application/x-www-form-urlencoded \r\n          // json中使用aplication请求头导致坑  { '{\"state\":\"离职\",\"jobTitle\":\"迎宾员\"}': '' }\r\n          await fetch(`http://localhost:2000/pers?act=editClerks&&num=${this.props.location.state[0].num}`,\r\n          {\r\n            method: 'POST',\r\n            // mode: 'cors',\r\n            // credentials: 'include', // cookie\r\n            headers: {\r\n              'Content-Type': 'application/json'\r\n            },\r\n            body:JSON.stringify(this.props.form.getFieldsValue())\r\n          }\r\n          )\r\n            .then(res => res.json())\r\n            .then(\r\n              data => {\r\n                // this.setState({ ...data })\r\n                console.log(data)\r\n              })\r\n        } else { //进行修改直接跳转到列表页\r\n          success();\r\n        }\r\n        this.props.history.push({  //退回到列表页\r\n          pathname: \"/pers/clerks\",\r\n        });\r\n      },\r\n      /* \r\n      onCancel() {  //取消回调函数\r\n        console.log('Cancel');\r\n      }, \r\n      */\r\n    })\r\n  }\r\n\r\n  render() {\r\n    //路由携带过来的数据\r\n    console.log(this.props.location.state)\r\n\r\n    //获取对象中的所有keys数值;\r\n    let arr = Object.keys(this.props.location.state)\r\n    //对所有keys数值进行过滤;\r\n    let TempArr = arr.filter((currentValue, index) => currentValue != \"num\" && currentValue != \"sex\" && currentValue != \"state\")\r\n    const { getFieldProps, getFieldError, isFieldValidating, getFieldDecorator } = this.props.form;\r\n    const formItemLayout = {//样式\r\n      // span是整体左移 pull是label左移   \r\n      labelCol: { span: 6, pull: 1 },//左侧 offset:3\r\n      wrapperCol: { span: 10 },//input 长度控制\r\n    };\r\n    return (\r\n      <section className=\"clerk-info\">\r\n        <div className=\"wrap\">\r\n        {/* \r\n            表单内容,编号spuId,菜品图片链接,菜品\r\n        */}\r\n          <Form >\r\n          <FormItem\r\n              label=\"推荐状态:\"\r\n              {...formItemLayout}\r\n              required\r\n            >\r\n              {getFieldDecorator(\"state\", {\r\n                initialValue: this.props.location.state.categoryName\r\n              })(\r\n                <Select\r\n                >\r\n                  <Option value=\"热销\">热销</Option>\r\n                  <Option value=\"推荐\">推荐</Option>\r\n                  <Option value=\"折扣\">折扣</Option>\r\n                </Select>\r\n              )}\r\n            </FormItem>\r\n\r\n        {/*       <FormItem\r\n              label=\"性别:\"\r\n              {...formItemLayout}\r\n              required\r\n            >\r\n              {getFieldDecorator(\"sex\", {\r\n                initialValue: this.props.location.state.sex\r\n              })(\r\n                <Select\r\n                >\r\n                  <Option value=\"男\">男</Option>\r\n                  <Option value=\"女\">女</Option>\r\n                  <Option value=\"Other\" disabled>你还想选啥,变态</Option>\r\n                </Select>\r\n              )}\r\n            </FormItem>\r\n\r\n            {title.map((ele, index) =>\r\n              <FormItem\r\n                {...formItemLayout}\r\n                key={index}\r\n                label={ele}\r\n                hasFeedback\r\n                help={isFieldValidating(TempArr[index]) ? '校验中...' : (getFieldError(TempArr[index]) || []).join(', ')}\r\n              >\r\n                {getFieldDecorator(TempArr[index],\r\n                  {\r\n                    initialValue: this.props.location.state[0][TempArr[index]],\r\n                    rules: [{\r\n                      required: true,\r\n                      min: 1,\r\n                      message: '输入内容至少为 1 个字符',\r\n                      pattern: new RegExp(/.+/g),\r\n                      // { validator: this.userExists }\r\n                    }]\r\n                  })(\r\n                    <Input />\r\n                  )}\r\n              </FormItem>\r\n            )}\r\n             */}\r\n            <FormItem\r\n              style={{\r\n                display: \"inline-block\", marginRight: 10, marginTop: 10, marginLeft: 160\r\n                , fontSize: 13, borderRadius: 5, textIndent: \"100px\"\r\n              }}>\r\n              <Button\r\n                ghost=\"true\"\r\n                type=\"primary\"\r\n                onClick={this.handlePageClick.bind(this)}\r\n              >\r\n                返回</Button>\r\n            </FormItem>\r\n           \r\n            <FormItem \r\n              style={{ display: \"inline-block\", marginTop: 10 }}\r\n            >\r\n              <Button\r\n                type=\"primary\"\r\n                htmlType=\"submit\"\r\n                style={{ display: \"inline-block\" }}\r\n                onClick={this.showConfirm.bind(this)}\r\n              >\r\n                提交</Button>\r\n            </FormItem>\r\n          </Form >\r\n        </div>\r\n      </section>\r\n    )\r\n  }\r\n}\r\nconst WrappedDemo = Form.create({ name: 'validate_other' })(Temp);\r\n\r\nexport default withRouter(WrappedDemo)\r\n// export default Temp"]},"metadata":{},"sourceType":"module"}