{"ast":null,"code":"import _classCallCheck from \"F:\\\\App Store\\\\Coding\\\\Github_Download\\\\JS-\\\\React\\u9879\\u76EE\\\\react-mall\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"F:\\\\App Store\\\\Coding\\\\Github_Download\\\\JS-\\\\React\\u9879\\u76EE\\\\react-mall\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"F:\\\\App Store\\\\Coding\\\\Github_Download\\\\JS-\\\\React\\u9879\\u76EE\\\\react-mall\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"F:\\\\App Store\\\\Coding\\\\Github_Download\\\\JS-\\\\React\\u9879\\u76EE\\\\react-mall\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _get from \"F:\\\\App Store\\\\Coding\\\\Github_Download\\\\JS-\\\\React\\u9879\\u76EE\\\\react-mall\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/get\";\nimport _inherits from \"F:\\\\App Store\\\\Coding\\\\Github_Download\\\\JS-\\\\React\\u9879\\u76EE\\\\react-mall\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport AnnotationShape from './annotation-shape';\nimport { getValidValue, pluckNumber, pluck } from '../../../../fc-core/src/lib';\n\nvar getComputedImagePosition = function getComputedImagePosition(a) {\n  var b = a.height,\n      c = a.width,\n      d = a.vAlign,\n      e = a.align,\n      f = a.x,\n      g = a.y,\n      h = {\n    x: f,\n    y: g\n  };\n  return 'center' === e ? h.x = f - c / 2 : 'right' === e ? h.x = f - c : void 0, 'middle' === d ? h.y = g - b / 2 : 'bottom' === d ? h.y = g - b : void 0, h;\n};\n\nvar ImageAnnotation =\n/*#__PURE__*/\nfunction (_AnnotationShape) {\n  _inherits(ImageAnnotation, _AnnotationShape);\n\n  function ImageAnnotation() {\n    var _this;\n\n    _classCallCheck(this, ImageAnnotation);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ImageAnnotation).call(this)), _this._listener = function (a) {\n      var b = this,\n          c = this.config,\n          d = a.originalEvent.target,\n          e = d.height,\n          f = d.width,\n          g = b._getConfig('align'),\n          h = b._getConfig('vAlign'),\n          i = b._getConfig('xScale'),\n          j = b._getConfig('yScale'),\n          k = e * j,\n          l = f * i,\n          m = getComputedImagePosition({\n        x: c.derivedX,\n        y: c.derivedY,\n        height: k,\n        width: l,\n        align: g,\n        vAlign: h\n      });\n\n      c = Object.assign(b.rawConfig, {\n        x: m.x,\n        y: m.y,\n        width: l,\n        height: k,\n        autoScale: 0\n      }), b.setData(c), b.rawConfig.onload && b.rawConfig.onload.call(b, {\n        width: l,\n        height: k\n      }), a.detachHandler();\n    };\n    return _this;\n  }\n\n  _createClass(ImageAnnotation, [{\n    key: \"getName\",\n    value: function getName() {\n      return 'image';\n    }\n  }, {\n    key: \"configureAttributes\",\n    value: function configureAttributes() {\n      var a = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      _get(_getPrototypeOf(ImageAnnotation.prototype), \"configureAttributes\", this).call(this, a);\n\n      var b = this,\n          c = b.rawConfig,\n          d = b.config,\n          e = b.groupConfig.scaleX || 1,\n          f = b.groupConfig.scaleY || 1;\n      d.url = getValidValue(c.url), d.xScale = pluckNumber(c.xScale, 100) / 100, d.yScale = pluckNumber(c.yScale, 100) / 100, d.width = pluckNumber(c.width), d.height = pluckNumber(c.height), d.align = pluck(c.align, 'left'), d.vAlign = pluck(c.vAlign, 'top'), d.xScale *= e, d.yScale *= f, d.elementType = 'image', 'undefined' == typeof d.width && 'undefined' == typeof d.height && b.addEventListener('load', b._listener);\n    }\n  }, {\n    key: \"updateAttr\",\n    value: function updateAttr() {\n      var a = this,\n          b = a.config,\n          c = b.calculatedAttrs;\n\n      a._setConfig('attr', {\n        x: pluckNumber(c.x, a.getScaledVal(b.x, !0)),\n        y: pluckNumber(c.y, a.getScaledVal(b.y, !1))\n      });\n    }\n  }, {\n    key: \"_getAnnotationAttrs\",\n    value: function _getAnnotationAttrs() {\n      var a = this,\n          b = a.config,\n          c = pluckNumber(a.rawConfig.autoscale, a.rawConfig.autoScale, 1),\n          d = b.attr,\n          e = b.url,\n          f = pluckNumber(b.attr.x, b.x),\n          g = pluckNumber(b.attr.y, b.y);\n      return c || (d = {\n        x: f,\n        y: g\n      }), b.derivedX = d.x = 'undefined' == typeof d.x ? a.getScaledVal(f, !0) : d.x, b.derivedY = d.y = 'undefined' == typeof d.y ? a.getScaledVal(g, !1) : d.y, d.src = e, d.opacity = pluckNumber(b.rawAlpha, 100) / 100, 'undefined' != typeof b.width && (d.width = b.width), 'undefined' != typeof b.height && (d.height = b.height), d;\n    }\n  }]);\n\n  return ImageAnnotation;\n}(AnnotationShape);\n\nexport default ImageAnnotation;","map":null,"metadata":{},"sourceType":"module"}