{"ast":null,"code":"import _regeneratorRuntime from \"F:\\\\App Store\\\\Coding\\\\Github_Download\\\\JS-\\\\React\\u9879\\u76EE\\\\react-mall\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"F:\\\\App Store\\\\Coding\\\\Github_Download\\\\JS-\\\\React\\u9879\\u76EE\\\\react-mall\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"F:\\\\App Store\\\\Coding\\\\Github_Download\\\\JS-\\\\React\\u9879\\u76EE\\\\react-mall\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"F:\\\\App Store\\\\Coding\\\\Github_Download\\\\JS-\\\\React\\u9879\\u76EE\\\\react-mall\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"F:\\\\App Store\\\\Coding\\\\Github_Download\\\\JS-\\\\React\\u9879\\u76EE\\\\react-mall\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"F:\\\\App Store\\\\Coding\\\\Github_Download\\\\JS-\\\\React\\u9879\\u76EE\\\\react-mall\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"F:\\\\App Store\\\\Coding\\\\Github_Download\\\\JS-\\\\React\\u9879\\u76EE\\\\react-mall\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"F:\\\\App Store\\\\Coding\\\\Github_Download\\\\JS-\\\\React\\u9879\\u76EE\\\\react-mall\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"F:\\\\App Store\\\\Coding\\\\Github_Download\\\\JS-\\\\React\\u9879\\u76EE\\\\react-mall\\\\src\\\\components\\\\Content\\\\Person\\\\Clerk\\\\Clerk.js\";\nimport React, { Component } from 'react';\nimport { Button, Pagination, Form, Modal, Input, message } from 'antd';\nimport IconFont from '../../../../iconfont/font';\nimport { Link, withRouter } from 'react-router-dom';\nimport './Clerk.less';\nvar FormItem = Form.Item;\n\nvar Temp =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Temp, _Component);\n\n  function Temp() {\n    var _this;\n\n    _classCallCheck(this, Temp);\n\n    //构造函数\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Temp).call(this));\n\n    _this.renderFunc = function (ele) {\n      //人员信息列表部分渲染;\n      return React.createElement(\"tr\", {\n        key: ele.num,\n        id: ele.num,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59\n        },\n        __self: this\n      }, ele.num), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60\n        },\n        __self: this\n      }, ele.name), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61\n        },\n        __self: this\n      }, ele.sex), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62\n        },\n        __self: this\n      }, ele.cardNum), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63\n        },\n        __self: this\n      }, ele.age), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      }, ele.birthday), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65\n        },\n        __self: this\n      }, ele.hiredate), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      }, ele.jobTitle), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      }, ele.state), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      }, React.createElement(Button, {\n        type: \"primary\",\n        size: \"small\" // href={`/pers/clerksDetails?num=${ele.num}`}\n        ,\n        ghost: \"true\",\n        onClick: _this.EditClick.bind(_assertThisInitialized(_this), ele.num),\n        style: {\n          marginRight: 10,\n          fontSize: 13,\n          width: 60,\n          height: 25,\n          borderRadius: 5\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }, \"\\u7F16\\u8F91\")), React.createElement(Button, {\n        type: \"primary\",\n        size: \"small\",\n        style: {\n          fontSize: 13,\n          width: 60,\n          height: 25,\n          borderRadius: 5\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }, \"\\u5220\\u9664\")));\n    };\n\n    _this.handleOk =\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(e) {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                // 通过回调函数将前端表单内容发送到后台;\n                console.log(_this.props.form.getFieldsValue());\n\n                _this.setState({\n                  visible: false\n                }); // await fetch(`http://localhost:2000/pers?act=editClerks&&num=${this.props.location.state[0].num}`,\n                //   {\n                //     method: 'POST',\n                //     headers: {\n                //       'Content-Type': 'application/json'\n                //     },\n                //     body: JSON.stringify(this.props.form.getFieldsValue())\n                //   }\n                // )\n                //   .then(res => res.json())\n                //   .then(\n                //     data => {\n                //       console.log(data)\n                //     })\n\n\n                console.log(\"使用回调函数向后台发送数据\");\n\n              case 3:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    _this.handleCancel = function (e) {\n      console.log(e);\n\n      _this.setState({\n        visible: false\n      });\n    };\n\n    _this.error = function () {\n      message.error(\"It doesn't exist !\");\n    };\n\n    _this.listItems = \"\"; //  人员信息列表数据;\n\n    _this.filterData = \"\"; // 过滤后的数据;\n\n    _this.itemsName = \" \", // From 表单渲染时候的英文;\n    _this.state = {\n      data: '',\n      storeData: \"\",\n      current: 1,\n      refresh: true,\n      visible: false\n    };\n    return _this;\n  }\n\n  _createClass(Temp, [{\n    key: \"getData\",\n    value: function getData() {\n      var _this2 = this;\n\n      //请求数据函数\n      fetch(\"http://localhost:2000/pers/clerks\", {\n        method: 'GET'\n      }).then(function (res) {\n        return res.json();\n      }).then(function (data) {\n        _this2.setState({\n          data: data.data,\n          storeData: data.data\n        });\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      //挂载前,请求数据函数\n      this.getData();\n    }\n  }, {\n    key: \"EditClick\",\n    value: function () {\n      var _EditClick = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2(index, link) {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                // e.preventDefault();\n                console.log(index); // pathname:'/pers/clerksDetails?num='+index,\n                // state:this.state.data[0].ClerkData.filter(e=>e.num==index)\n                // let vcode =[{aa:1}]\n\n                _context2.next = 3;\n                return this.props.history.push({\n                  pathname: \"/pers/clerksDetails\",\n                  state: this.state.data[0].ClerkData.filter(function (e) {\n                    return e.num == index;\n                  }),\n                  search: '?num=' + index\n                });\n\n              case 3:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function EditClick(_x2, _x3) {\n        return _EditClick.apply(this, arguments);\n      }\n\n      return EditClick;\n    }()\n  }, {\n    key: \"ClerksInfo\",\n    value: function ClerksInfo(data) {\n      var _this3 = this;\n\n      if (data) {\n        // 过滤例子： [32, 33, 16, 40].filter((a)=> a<40&a>20) \n        // 根据页码渲染当前页\n        // 对返回\n        // 把数据length传入底部页码组件,一共几页根据组件内设置每页items数量,自动生成\n        if (data[0].ClerkData.length === 1) {\n          this.listItems = data[0].ClerkData.map(this.renderFunc);\n        } else {\n          // 如果为完整数据对数据进行筛选后显示;\n          // 根据页码判断后结果,显示内容;\n          this.listItems = data[0].ClerkData.filter(function (e) {\n            return e.num >= 1 + 5 * (_this3.state.current - 1) && e.num <= 5 * _this3.state.current;\n          }).map(this.renderFunc);\n        }\n\n        return React.createElement(\"tbody\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 103\n          },\n          __self: this\n        }, this.listItems);\n      }\n    }\n  }, {\n    key: \"ChangePage\",\n    value: function ChangePage(page) {\n      //<Pagination/>组件自带回调函数\n      this.setState({\n        current: page\n      }); // 使用setState的 \"回调函数\" 解决异步问题\n      // setState为异步  上面console以后 => setState为异步 => 先执行下面console \n      // 解决this.setState可能会引发不必要的渲染(renders) \n      // https://www.cnblogs.com/lgp142332/p/7270047.html\n    }\n    /* \r\n       问题：首次render也符合return中的判断,导致不渲染了;\r\n      shouldComponentUpdate(nextProps, nextState){ \r\n       解决this.setState可能引发不必要的渲染;\r\n       导致初始render也不渲染了;\r\n         return this.state.page !== nextState.page;\r\n      } \r\n     */\n\n  }, {\n    key: \"handleSearchClick\",\n    value: function handleSearchClick(e) {\n      var _this4 = this;\n\n      /* \r\n        步骤：\r\n           0. 操作数据之前将数据存为两份一份进行操作(渲染组件),一份完整数据预留查找使用;\r\n           1. 获取input内的value数值;  let value=document.getElementById(\"indexName\").value;\r\n           2. 使用filter把不符合条件的过滤掉,剩下符合条件内容;   this.state.data[0].ClerkData.filter((ele)=>ele.name===\"李旭\");\r\n           3. 让母数据的ClerkData直接等于筛选后的子数据,解决渲染方法没法操作问题;\r\n      */\n      var value = document.getElementById(\"indexName\").value;\n      var result = this.state.storeData[0].ClerkData.filter(function (ele) {\n        return ele.name === value;\n      });\n\n      if (result.length) {\n        var temp = JSON.parse(JSON.stringify(this.state.data));\n        temp[0].ClerkData = result;\n        this.setState({\n          data: temp\n        }, function () {\n          _this4.ClerksInfo(_this4.state.data);\n\n          console.log(_this4.state.data);\n        });\n      } else {\n        this.error();\n        this.getData(); //如果结果不存在重新请求数据,也可以提前把数据存在\n      } //筛选完成后的数据\n\n    } // --------------------   添加人员信息部分组件    ---------------------------\n\n  }, {\n    key: \"addInfo\",\n    value: function addInfo(e) {\n      e.preventDefault();\n      this.setState({\n        //控制modal\n        visible: true\n      });\n    }\n  }, {\n    key: \"handleResetClick\",\n    value: function handleResetClick() {\n      document.getElementById(\"indexName\").value = \"\";\n      this.setState({\n        current: 1\n      });\n      this.getData(); //如果结果不存在重新请求数据,也可以提前把数据存在\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var Page = null;\n      var data = this.state.data;\n      var _this$props$form = this.props.form,\n          getFieldProps = _this$props$form.getFieldProps,\n          getFieldError = _this$props$form.getFieldError,\n          isFieldValidating = _this$props$form.isFieldValidating,\n          getFieldDecorator = _this$props$form.getFieldDecorator; //--------------------    表单部分    ---------------\n\n      var title = [\"姓名\", \"性别\", \"身份证号\", \"出生年月\", \"年龄\", \"入职时间\", \"职位\", \"状态\"];\n      var formItemLayout = {\n        //样式\n        // span是整体左移 pull是label左移   \n        labelCol: {\n          xs: {\n            span: 24\n          },\n          offset: 2,\n          sm: {\n            span: 6\n          }\n        },\n        //左侧 offset:3\n        wrapperCol: {\n          span: 10\n        } //input 长度控制\n\n      };\n\n      if (data) {\n        //  底部页码组件\n        Page = React.createElement(Pagination, {\n          defaultCurrent: 1,\n          pageSize: 5,\n          total: data[0].ClerkData.length,\n          onChange: this.ChangePage.bind(this),\n          style: {\n            marginRight: 30,\n            marginTop: 25,\n            float: \"right\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 213\n          },\n          __self: this\n        }); //  目的给Form.Item 规范命名让其和数据key值相同\n        //  获取所有key值,num渲染时候不需要num,使用时候给删除掉\n\n        this.itemsName = Object.keys(this.state.data[0].ClerkData[0]).filter(function (e) {\n          return e !== \"num\";\n        });\n      } // console.log(title)\n\n\n      console.log(this.state);\n\n      var FormElement = function FormElement() {\n        console.log(this);\n        return React.createElement(Form, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 234\n          },\n          __self: this\n        }, title.map(function (ele, index) {\n          return React.createElement(FormItem, Object.assign({}, formItemLayout, {\n            key: title[index],\n            label: ele,\n            hasFeedback: true,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 237\n            },\n            __self: this\n          }), getFieldDecorator(title[index], {\n            rules: [{\n              required: true,\n              min: 1,\n              message: '输入内容至少为 1 个字符',\n              pattern: new RegExp(/.+/g)\n            }]\n          })(React.createElement(Input, {\n            placeholder: \"请填写\" + title[index],\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 252\n            },\n            __self: this\n          })));\n        }));\n      };\n\n      return React.createElement(\"section\", {\n        className: \"clerk-info\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 262\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"app-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 264\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"el-serch-wrap\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 265\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"el-title-body\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 266\n        },\n        __self: this\n      }, React.createElement(Form, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 267\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 268\n        },\n        __self: this\n      }, React.createElement(IconFont, {\n        type: \"mall-doc-glass\",\n        style: {\n          fontSize: 16,\n          marginRight: 5\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 269\n        },\n        __self: this\n      }), React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 270\n        },\n        __self: this\n      }, \"\\u7B5B\\u9009\\u68C0\\u7D22\"), React.createElement(Button, {\n        className: \"btn\",\n        onClick: this.handleSearchClick.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 271\n        },\n        __self: this\n      }, \"\\u67E5\\u8BE2\\u7ED3\\u679C\"), React.createElement(Button, {\n        className: \"btn\",\n        style: {\n          color: \"#1890ff\",\n          marginRight: 20\n        },\n        ghost: true,\n        onClick: this.handleResetClick.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 272\n        },\n        __self: this\n      }, \"\\u91CD\\u7F6E\")), React.createElement(\"div\", {\n        className: \"el-form-item\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 279\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 280\n        },\n        __self: this\n      }, \"\\u8F93\\u5165\\u68C0\\u7D22:\"), React.createElement(\"input\", {\n        type: \"text\",\n        placeholder: \"\\u8BF7\\u8F93\\u5165\\u59D3\\u540D\",\n        id: \"indexName\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 281\n        },\n        __self: this\n      }))))), React.createElement(\"div\", {\n        className: \"el-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 287\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"el-title-body\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 288\n        },\n        __self: this\n      }, React.createElement(IconFont, {\n        type: \"mall-doc-list\",\n        style: {\n          fontSize: 16,\n          marginRight: 5\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 289\n        },\n        __self: this\n      }), React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 290\n        },\n        __self: this\n      }, \"\\u6570\\u636E\\u5217\\u8868\"), React.createElement(\"button\", {\n        className: \"add\",\n        onClick: this.addInfo.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 291\n        },\n        __self: this\n      }, \"\\u6DFB\\u52A0\\u4EBA\\u5458\\u4FE1\\u606F\"), React.createElement(Modal, {\n        title: \"\\u5E97\\u5458\\u4FE1\\u606F\\u6DFB\\u52A0\",\n        visible: this.state.visible,\n        onOk: this.handleOk,\n        onCancel: this.handleCancel,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 293\n        },\n        __self: this\n      }, FormElement()))), React.createElement(\"main\", {\n        className: \"table-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 303\n        },\n        __self: this\n      }, React.createElement(\"table\", {\n        cellPadding: \"0\",\n        cellSpacing: \"0\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 304\n        },\n        __self: this\n      }, React.createElement(\"thead\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 305\n        },\n        __self: this\n      }, React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 306\n        },\n        __self: this\n      }, React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 307\n        },\n        __self: this\n      }, \"\\u5DE5\\u53F7\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 308\n        },\n        __self: this\n      }, \"\\u59D3\\u540D\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 309\n        },\n        __self: this\n      }, \"\\u6027\\u522B\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 310\n        },\n        __self: this\n      }, \"\\u8EAB\\u4EFD\\u8BC1\\u53F7\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 311\n        },\n        __self: this\n      }, \"\\u51FA\\u751F\\u5E74\\u6708\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 312\n        },\n        __self: this\n      }, \"\\u5E74\\u9F84\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 313\n        },\n        __self: this\n      }, \"\\u5165\\u804C\\u65F6\\u95F4\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 314\n        },\n        __self: this\n      }, \"\\u804C\\u4F4D\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 315\n        },\n        __self: this\n      }, \"\\u72B6\\u6001\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 316\n        },\n        __self: this\n      }, \"\\u64CD\\u4F5C\"))), this.ClerksInfo(this.state.data))), Page));\n    }\n  }]);\n\n  return Temp;\n}(Component);\n\nvar WrappedDemo = Form.create({\n  name: 'validate_other'\n})(Temp);\nexport default withRouter(WrappedDemo); // export default Temp","map":{"version":3,"sources":["F:\\App Store\\Coding\\Github_Download\\JS-\\React项目\\react-mall\\src\\components\\Content\\Person\\Clerk\\Clerk.js"],"names":["React","Component","Button","Pagination","Form","Modal","Input","message","IconFont","Link","withRouter","FormItem","Item","Temp","renderFunc","ele","num","name","sex","cardNum","age","birthday","hiredate","jobTitle","state","EditClick","bind","marginRight","fontSize","width","height","borderRadius","handleOk","e","console","log","props","form","getFieldsValue","setState","visible","handleCancel","error","listItems","filterData","itemsName","data","storeData","current","refresh","fetch","method","then","res","json","getData","index","link","history","push","pathname","ClerkData","filter","search","length","map","page","value","document","getElementById","result","temp","JSON","parse","stringify","ClerksInfo","preventDefault","Page","getFieldProps","getFieldError","isFieldValidating","getFieldDecorator","title","formItemLayout","labelCol","xs","span","offset","sm","wrapperCol","ChangePage","marginTop","float","Object","keys","FormElement","rules","required","min","pattern","RegExp","handleSearchClick","color","handleResetClick","addInfo","WrappedDemo","create"],"mappings":";;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,MAAT,EAAiBC,UAAjB,EAA6BC,IAA7B,EAAmCC,KAAnC,EAA0CC,KAA1C,EAAiDC,OAAjD,QAAgE,MAAhE;AACA,OAAOC,QAAP,MAAqB,2BAArB;AACA,SAASC,IAAT,EAAeC,UAAf,QAAiC,kBAAjC;AACA,OAAO,cAAP;AAEA,IAAMC,QAAQ,GAAGP,IAAI,CAACQ,IAAtB;;IAEMC,I;;;;;AACJ,kBAAc;AAAA;;AAAA;;AAAE;AACd;;AADY,UA8CdC,UA9Cc,GA8CD,UAACC,GAAD,EAAS;AAAE;AACtB,aACE;AAAI,QAAA,GAAG,EAAEA,GAAG,CAACC,GAAb;AAAkB,QAAA,EAAE,EAAED,GAAG,CAACC,GAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAKD,GAAG,CAACC,GAAT,CADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAKD,GAAG,CAACE,IAAT,CAFF,EAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAKF,GAAG,CAACG,GAAT,CAHF,EAIE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAKH,GAAG,CAACI,OAAT,CAJF,EAKE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAKJ,GAAG,CAACK,GAAT,CALF,EAME;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAKL,GAAG,CAACM,QAAT,CANF,EAOE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAKN,GAAG,CAACO,QAAT,CAPF,EAQE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAKP,GAAG,CAACQ,QAAT,CARF,EASE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAKR,GAAG,CAACS,KAAT,CATF,EAUE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,MAAD;AACE,QAAA,IAAI,EAAC,SADP;AAEE,QAAA,IAAI,EAAC,OAFP,CAGE;AAHF;AAIE,QAAA,KAAK,EAAC,MAJR;AAKE,QAAA,OAAO,EAAE,MAAKC,SAAL,CAAeC,IAAf,gCAA0BX,GAAG,CAACC,GAA9B,CALX;AAME,QAAA,KAAK,EAAE;AAAEW,UAAAA,WAAW,EAAE,EAAf;AAAmBC,UAAAA,QAAQ,EAAE,EAA7B;AAAiCC,UAAAA,KAAK,EAAE,EAAxC;AAA4CC,UAAAA,MAAM,EAAE,EAApD;AAAwDC,UAAAA,YAAY,EAAE;AAAtE,SANT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAQE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBARF,CADF,EAWE,oBAAC,MAAD;AACE,QAAA,IAAI,EAAC,SADP;AAEE,QAAA,IAAI,EAAC,OAFP;AAGE,QAAA,KAAK,EAAE;AAAEH,UAAAA,QAAQ,EAAE,EAAZ;AAAgBC,UAAAA,KAAK,EAAE,EAAvB;AAA2BC,UAAAA,MAAM,EAAE,EAAnC;AAAuCC,UAAAA,YAAY,EAAE;AAArD,SAHT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAXF,CAVF,CADF;AA6BD,KA5Ea;;AAAA,UAoJdC,QApJc;AAAA;AAAA;AAAA;AAAA;AAAA,+BAoJH,iBAAOC,CAAP;AAAA;AAAA;AAAA;AAAA;AACT;AACAC,gBAAAA,OAAO,CAACC,GAAR,CAAY,MAAKC,KAAL,CAAWC,IAAX,CAAgBC,cAAhB,EAAZ;;AACA,sBAAKC,QAAL,CAAc;AACZC,kBAAAA,OAAO,EAAE;AADG,iBAAd,EAHS,CAOT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACAN,gBAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ;;AArBS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OApJG;;AAAA;AAAA;AAAA;AAAA;;AAAA,UA2KdM,YA3Kc,GA2KC,UAACR,CAAD,EAAO;AACpBC,MAAAA,OAAO,CAACC,GAAR,CAAYF,CAAZ;;AACA,YAAKM,QAAL,CAAc;AACZC,QAAAA,OAAO,EAAE;AADG,OAAd;AAGD,KAhLa;;AAAA,UAiLdE,KAjLc,GAiLN,YAAM;AACZnC,MAAAA,OAAO,CAACmC,KAAR,CAAc,oBAAd;AACD,KAnLa;;AAEZ,UAAKC,SAAL,GAAiB,EAAjB,CAFY,CAES;;AACrB,UAAKC,UAAL,GAAkB,EAAlB,CAHY,CAGW;;AACvB,UAAKC,SAAL,GAAe,GAAf,EACC;AACD,UAAKrB,KAAL,GAAa;AACXsB,MAAAA,IAAI,EAAE,EADK;AAEXC,MAAAA,SAAS,EAAE,EAFA;AAGXC,MAAAA,OAAO,EAAE,CAHE;AAIXC,MAAAA,OAAO,EAAE,IAJE;AAKXT,MAAAA,OAAO,EAAE;AALE,KAFb;AAJY;AAab;;;;8BACS;AAAA;;AAAE;AACVU,MAAAA,KAAK,sCAAsC;AACzCC,QAAAA,MAAM,EAAE;AADiC,OAAtC,CAAL,CAGGC,IAHH,CAGQ,UAAAC,GAAG;AAAA,eAAIA,GAAG,CAACC,IAAJ,EAAJ;AAAA,OAHX,EAG2BF,IAH3B,CAII,UAAAN,IAAI,EAAI;AACN,QAAA,MAAI,CAACP,QAAL,CAAc;AACZO,UAAAA,IAAI,EAAEA,IAAI,CAACA,IADC;AAEZC,UAAAA,SAAS,EAAED,IAAI,CAACA;AAFJ,SAAd;AAID,OATL;AAUD;;;wCACmB;AAClB;AACA,WAAKS,OAAL;AACD;;;;;;iDACeC,K,EAAOC,I;;;;;AACrB;AACAvB,gBAAAA,OAAO,CAACC,GAAR,CAAYqB,KAAZ,E,CACA;AACA;AACA;;;uBACM,KAAKpB,KAAL,CAAWsB,OAAX,CAAmBC,IAAnB,CAAwB;AAC5BC,kBAAAA,QAAQ,EAAE,qBADkB;AAE5BpC,kBAAAA,KAAK,EAAE,KAAKA,KAAL,CAAWsB,IAAX,CAAgB,CAAhB,EAAmBe,SAAnB,CAA6BC,MAA7B,CAAoC,UAAA7B,CAAC;AAAA,2BAAIA,CAAC,CAACjB,GAAF,IAASwC,KAAb;AAAA,mBAArC,CAFqB;AAG5BO,kBAAAA,MAAM,EAAE,UAAUP;AAHU,iBAAxB,C;;;;;;;;;;;;;;;;;;+BAyCGV,I,EAAM;AAAA;;AACf,UAAIA,IAAJ,EAAU;AACR;AAEA;AACA;AACA;AACA,YAAIA,IAAI,CAAC,CAAD,CAAJ,CAAQe,SAAR,CAAkBG,MAAlB,KAA6B,CAAjC,EAAoC;AAClC,eAAKrB,SAAL,GAAiBG,IAAI,CAAC,CAAD,CAAJ,CAAQe,SAAR,CAAkBI,GAAlB,CAAsB,KAAKnD,UAA3B,CAAjB;AACD,SAFD,MAEO;AACL;AACA;AACA,eAAK6B,SAAL,GAAiBG,IAAI,CAAC,CAAD,CAAJ,CAAQe,SAAR,CAAkBC,MAAlB,CAAyB,UAAC7B,CAAD;AAAA,mBACxCA,CAAC,CAACjB,GAAF,IAAS,IAAI,KAAK,MAAI,CAACQ,KAAL,CAAWwB,OAAX,GAAqB,CAA1B,CAAb,IAA6Cf,CAAC,CAACjB,GAAF,IAAS,IAAI,MAAI,CAACQ,KAAL,CAAWwB,OAD7B;AAAA,WAAzB,EAEfiB,GAFe,CAEX,KAAKnD,UAFM,CAAjB;AAGD;;AACD,eAAQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAQ,KAAK6B,SAAb,CAAR;AACD;AACF;;;+BAEUuB,I,EAAM;AAAC;AAChB,WAAK3B,QAAL,CAAc;AAAES,QAAAA,OAAO,EAAEkB;AAAX,OAAd,EADe,CACiB;AAEhC;AAEA;AACA;AACD;AACD;;;;;;;;;;;sCAUkBjC,C,EAAG;AAAA;;AACnB;;;;;;;AAOA,UAAIkC,KAAK,GAAGC,QAAQ,CAACC,cAAT,CAAwB,WAAxB,EAAqCF,KAAjD;AACA,UAAIG,MAAM,GAAG,KAAK9C,KAAL,CAAWuB,SAAX,CAAqB,CAArB,EAAwBc,SAAxB,CAAkCC,MAAlC,CAAyC,UAAC/C,GAAD;AAAA,eAASA,GAAG,CAACE,IAAJ,KAAakD,KAAtB;AAAA,OAAzC,CAAb;;AAEA,UAAIG,MAAM,CAACN,MAAX,EAAmB;AACjB,YAAIO,IAAI,GAAGC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,SAAL,CAAe,KAAKlD,KAAL,CAAWsB,IAA1B,CAAX,CAAX;AACAyB,QAAAA,IAAI,CAAC,CAAD,CAAJ,CAAQV,SAAR,GAAoBS,MAApB;AACA,aAAK/B,QAAL,CAAc;AAAEO,UAAAA,IAAI,EAAEyB;AAAR,SAAd,EAA8B,YAAM;AAClC,UAAA,MAAI,CAACI,UAAL,CAAgB,MAAI,CAACnD,KAAL,CAAWsB,IAA3B;;AACAZ,UAAAA,OAAO,CAACC,GAAR,CAAY,MAAI,CAACX,KAAL,CAAWsB,IAAvB;AACD,SAHD;AAID,OAPD,MAOO;AACL,aAAKJ,KAAL;AACA,aAAKa,OAAL,GAFK,CAES;AAEf,OAtBkB,CAuBnB;;AACD,K,CACD;;;;4BACQtB,C,EAAG;AACTA,MAAAA,CAAC,CAAC2C,cAAF;AACA,WAAKrC,QAAL,CAAc;AAAC;AACbC,QAAAA,OAAO,EAAE;AADG,OAAd;AAGD;;;uCAkCkB;AACjB4B,MAAAA,QAAQ,CAACC,cAAT,CAAwB,WAAxB,EAAqCF,KAArC,GAA6C,EAA7C;AACA,WAAK5B,QAAL,CAAc;AAAES,QAAAA,OAAO,EAAE;AAAX,OAAd;AACA,WAAKO,OAAL,GAHiB,CAGH;AACf;;;6BAEQ;AACP,UAAIsB,IAAI,GAAG,IAAX;AADO,UAED/B,IAFC,GAEQ,KAAKtB,KAFb,CAEDsB,IAFC;AAAA,6BAGwE,KAAKV,KAAL,CAAWC,IAHnF;AAAA,UAGCyC,aAHD,oBAGCA,aAHD;AAAA,UAGgBC,aAHhB,oBAGgBA,aAHhB;AAAA,UAG+BC,iBAH/B,oBAG+BA,iBAH/B;AAAA,UAGkDC,iBAHlD,oBAGkDA,iBAHlD,EAIP;;AACA,UAAMC,KAAK,GAAG,CAAC,IAAD,EAAO,IAAP,EAAa,MAAb,EAAqB,MAArB,EAA6B,IAA7B,EAAmC,MAAnC,EAA2C,IAA3C,EAAiD,IAAjD,CAAd;AACA,UAAMC,cAAc,GAAG;AAAC;AACtB;AACAC,QAAAA,QAAQ,EAAE;AACRC,UAAAA,EAAE,EAAE;AAAEC,YAAAA,IAAI,EAAE;AAAR,WADI;AAERC,UAAAA,MAAM,EAAE,CAFA;AAGRC,UAAAA,EAAE,EAAE;AAAEF,YAAAA,IAAI,EAAE;AAAR;AAHI,SAFW;AAMnB;AACFG,QAAAA,UAAU,EAAE;AAAEH,UAAAA,IAAI,EAAE;AAAR,SAPS,CAOI;;AAPJ,OAAvB;;AASA,UAAIxC,IAAJ,EAAU;AACR;AACA+B,QAAAA,IAAI,GAAG,oBAAC,UAAD;AACL,UAAA,cAAc,EAAE,CADX;AAEL,UAAA,QAAQ,EAAE,CAFL;AAGL,UAAA,KAAK,EAAE/B,IAAI,CAAC,CAAD,CAAJ,CAAQe,SAAR,CAAkBG,MAHpB;AAIL,UAAA,QAAQ,EAAE,KAAK0B,UAAL,CAAgBhE,IAAhB,CAAqB,IAArB,CAJL;AAKL,UAAA,KAAK,EAAE;AACLC,YAAAA,WAAW,EAAE,EADR;AACYgE,YAAAA,SAAS,EAAE,EADvB;AAC2BC,YAAAA,KAAK,EAAE;AADlC,WALF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAP,CAFQ,CAWR;AACA;;AACD,aAAK/C,SAAL,GAAegD,MAAM,CAACC,IAAP,CAAY,KAAKtE,KAAL,CAAWsB,IAAX,CAAgB,CAAhB,EAAmBe,SAAnB,CAA6B,CAA7B,CAAZ,EAA6CC,MAA7C,CAAoD,UAAA7B,CAAC;AAAA,iBAAEA,CAAC,KAAG,KAAN;AAAA,SAArD,CAAf;AAEA,OA9BM,CA+BP;;;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAKX,KAAjB;;AACF,UAAMuE,WAAW,GAAC,SAAZA,WAAY,GAAU;AAE1B7D,QAAAA,OAAO,CAACC,GAAR,CAAY,IAAZ;AAEE,eACE,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAEY+C,KAAK,CAACjB,GAAN,CAAU,UAAClD,GAAD,EAAMyC,KAAN;AAAA,iBACR,oBAAC,QAAD,oBACM2B,cADN;AAEE,YAAA,GAAG,EAAGD,KAAK,CAAC1B,KAAD,CAFb;AAGE,YAAA,KAAK,EAAEzC,GAHT;AAIE,YAAA,WAAW,MAJb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAMGkE,iBAAiB,CAACC,KAAK,CAAC1B,KAAD,CAAN,EAChB;AACEwC,YAAAA,KAAK,EAAE,CAAC;AACNC,cAAAA,QAAQ,EAAE,IADJ;AAENC,cAAAA,GAAG,EAAE,CAFC;AAGN3F,cAAAA,OAAO,EAAE,eAHH;AAIN4F,cAAAA,OAAO,EAAE,IAAIC,MAAJ,CAAW,KAAX;AAJH,aAAD;AADT,WADgB,CAAjB,CASG,oBAAC,KAAD;AAAO,YAAA,WAAW,EAAE,QAAOlB,KAAK,CAAC1B,KAAD,CAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YATH,CANH,CADQ;AAAA,SAAV,CAFZ,CADF;AA0BD,OA9BH;;AAgCE,aACE;AAAS,QAAA,SAAS,EAAC,YAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAEE;AAAK,QAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAK,QAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAK,QAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,QAAD;AAAU,QAAA,IAAI,EAAC,gBAAf;AAAgC,QAAA,KAAK,EAAE;AAAE5B,UAAAA,QAAQ,EAAE,EAAZ;AAAgBD,UAAAA,WAAW,EAAE;AAA7B,SAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oCAFF,EAGE,oBAAC,MAAD;AAAQ,QAAA,SAAS,EAAC,KAAlB;AAAwB,QAAA,OAAO,EAAE,KAAK0E,iBAAL,CAAuB3E,IAAvB,CAA4B,IAA5B,CAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oCAHF,EAIE,oBAAC,MAAD;AACE,QAAA,SAAS,EAAC,KADZ;AAEE,QAAA,KAAK,EAAE;AAAE4E,UAAAA,KAAK,EAAE,SAAT;AAAoB3E,UAAAA,WAAW,EAAE;AAAjC,SAFT;AAGE,QAAA,KAAK,MAHP;AAIE,QAAA,OAAO,EAAE,KAAK4E,gBAAL,CAAsB7E,IAAtB,CAA2B,IAA3B,CAJX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAJF,CADF,EAYE;AAAK,QAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qCADF,EAEE;AAAO,QAAA,IAAI,EAAC,MAAZ;AAAmB,QAAA,WAAW,EAAC,gCAA/B;AAAuC,QAAA,EAAE,EAAC,WAA1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFF,CAZF,CADF,CADF,CADF,EAuBE;AAAK,QAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAK,QAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,QAAD;AAAU,QAAA,IAAI,EAAC,eAAf;AAA+B,QAAA,KAAK,EAAE;AAAEE,UAAAA,QAAQ,EAAE,EAAZ;AAAgBD,UAAAA,WAAW,EAAE;AAA7B,SAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oCAFF,EAGE;AAAQ,QAAA,SAAS,EAAC,KAAlB;AAAwB,QAAA,OAAO,EAAE,KAAK6E,OAAL,CAAa9E,IAAb,CAAkB,IAAlB,CAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gDAHF,EAKE,oBAAC,KAAD;AACE,QAAA,KAAK,EAAC,sCADR;AAEE,QAAA,OAAO,EAAE,KAAKF,KAAL,CAAWgB,OAFtB;AAGE,QAAA,IAAI,EAAE,KAAKR,QAHb;AAIE,QAAA,QAAQ,EAAE,KAAKS,YAJjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAMCsD,WAAW,EANZ,CALF,CADF,CAvBF,EAuCE;AAAM,QAAA,SAAS,EAAC,iBAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAO,QAAA,WAAW,EAAC,GAAnB;AAAuB,QAAA,WAAW,EAAC,GAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAFF,EAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAHF,EAIE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oCAJF,EAKE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oCALF,EAME;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBANF,EAOE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oCAPF,EAQE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBARF,EASE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBATF,EAUE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAVF,CADF,CADF,EAeG,KAAKpB,UAAL,CAAgB,KAAKnD,KAAL,CAAWsB,IAA3B,CAfH,CADF,CAvCF,EA0DG+B,IA1DH,CAFF,CADF;AAiED;;;;EA7TgB5E,S;;AA+TnB,IAAMwG,WAAW,GAAGrG,IAAI,CAACsG,MAAL,CAAY;AAAEzF,EAAAA,IAAI,EAAE;AAAR,CAAZ,EAAwCJ,IAAxC,CAApB;AAEA,eAAeH,UAAU,CAAC+F,WAAD,CAAzB,C,CACA","sourcesContent":["import React, { Component } from 'react'\r\nimport { Button, Pagination, Form, Modal, Input, message } from 'antd';\r\nimport IconFont from '../../../../iconfont/font';\r\nimport { Link, withRouter } from 'react-router-dom';\r\nimport './Clerk.less';\r\n\r\nconst FormItem = Form.Item;\r\n\r\nclass Temp extends Component {\r\n  constructor() { //构造函数\r\n    super();\r\n    this.listItems = \"\"; //  人员信息列表数据;\r\n    this.filterData = \"\";  // 过滤后的数据;\r\n    this.itemsName=\" \" , \r\n     // From 表单渲染时候的英文;\r\n    this.state = {\r\n      data: '',\r\n      storeData: \"\",\r\n      current: 1,\r\n      refresh: true,\r\n      visible: false,\r\n    }\r\n  }\r\n  getData() { //请求数据函数\r\n    fetch(`http://localhost:2000/pers/clerks`, {\r\n      method: 'GET'\r\n    })\r\n      .then(res => res.json()).then(\r\n        data => {\r\n          this.setState({\r\n            data: data.data,\r\n            storeData: data.data\r\n          })\r\n        })\r\n  }\r\n  componentDidMount() {\r\n    //挂载前,请求数据函数\r\n    this.getData();\r\n  }\r\n  async EditClick(index, link) {\r\n    // e.preventDefault();\r\n    console.log(index);\r\n    // pathname:'/pers/clerksDetails?num='+index,\r\n    // state:this.state.data[0].ClerkData.filter(e=>e.num==index)\r\n    // let vcode =[{aa:1}]\r\n    await this.props.history.push({\r\n      pathname: \"/pers/clerksDetails\",\r\n      state: this.state.data[0].ClerkData.filter(e => e.num == index),\r\n      search: '?num=' + index\r\n    });\r\n    // this.props.history.push('/pers/clerksDetails?num='+index);\r\n    // this.props.history.push('/pers/clerksDetails?num='+index);\r\n    // this.props.location.state=1111\r\n    // console.log(this.props)\r\n  }\r\n  renderFunc = (ele) => { //人员信息列表部分渲染;\r\n    return (\r\n      <tr key={ele.num} id={ele.num}>\r\n        <td>{ele.num}</td>\r\n        <td>{ele.name}</td>\r\n        <td>{ele.sex}</td>\r\n        <td>{ele.cardNum}</td>\r\n        <td>{ele.age}</td>\r\n        <td>{ele.birthday}</td>\r\n        <td>{ele.hiredate}</td>\r\n        <td>{ele.jobTitle}</td>\r\n        <td>{ele.state}</td>\r\n        <td>\r\n          <Button\r\n            type=\"primary\"\r\n            size=\"small\"\r\n            // href={`/pers/clerksDetails?num=${ele.num}`}\r\n            ghost=\"true\"\r\n            onClick={this.EditClick.bind(this, ele.num)}\r\n            style={{ marginRight: 10, fontSize: 13, width: 60, height: 25, borderRadius: 5 }}\r\n          >\r\n            <span>编辑</span>\r\n          </Button>\r\n          <Button\r\n            type=\"primary\"\r\n            size=\"small\"\r\n            style={{ fontSize: 13, width: 60, height: 25, borderRadius: 5 }}\r\n          >删除</Button>\r\n        </td>\r\n      </tr>)\r\n  }\r\n  ClerksInfo(data) {\r\n    if (data) {\r\n      // 过滤例子： [32, 33, 16, 40].filter((a)=> a<40&a>20) \r\n\r\n      // 根据页码渲染当前页\r\n      // 对返回\r\n      // 把数据length传入底部页码组件,一共几页根据组件内设置每页items数量,自动生成\r\n      if (data[0].ClerkData.length === 1) {\r\n        this.listItems = data[0].ClerkData.map(this.renderFunc)\r\n      } else {\r\n        // 如果为完整数据对数据进行筛选后显示;\r\n        // 根据页码判断后结果,显示内容;\r\n        this.listItems = data[0].ClerkData.filter((e) =>\r\n          e.num >= 1 + 5 * (this.state.current - 1) && e.num <= 5 * this.state.current\r\n        ).map(this.renderFunc)\r\n      }\r\n      return (<tbody>{this.listItems}</tbody>)\r\n    }\r\n  }\r\n\r\n  ChangePage(page) {//<Pagination/>组件自带回调函数\r\n    this.setState({ current: page })// 使用setState的 \"回调函数\" 解决异步问题\r\n\r\n    // setState为异步  上面console以后 => setState为异步 => 先执行下面console \r\n\r\n    // 解决this.setState可能会引发不必要的渲染(renders) \r\n    // https://www.cnblogs.com/lgp142332/p/7270047.html\r\n  }\r\n  /* \r\n     问题：首次render也符合return中的判断,导致不渲染了;\r\n\r\n  shouldComponentUpdate(nextProps, nextState){ \r\n     解决this.setState可能引发不必要的渲染;\r\n     导致初始render也不渲染了;\r\n\r\n     return this.state.page !== nextState.page;\r\n    } \r\n   */\r\n  handleSearchClick(e) {\r\n    /* \r\n      步骤：\r\n         0. 操作数据之前将数据存为两份一份进行操作(渲染组件),一份完整数据预留查找使用;\r\n         1. 获取input内的value数值;  let value=document.getElementById(\"indexName\").value;\r\n         2. 使用filter把不符合条件的过滤掉,剩下符合条件内容;   this.state.data[0].ClerkData.filter((ele)=>ele.name===\"李旭\");\r\n         3. 让母数据的ClerkData直接等于筛选后的子数据,解决渲染方法没法操作问题;\r\n    */\r\n    let value = document.getElementById(\"indexName\").value\r\n    let result = this.state.storeData[0].ClerkData.filter((ele) => ele.name === value)\r\n\r\n    if (result.length) {\r\n      let temp = JSON.parse(JSON.stringify(this.state.data));\r\n      temp[0].ClerkData = result;\r\n      this.setState({ data: temp }, () => {\r\n        this.ClerksInfo(this.state.data)\r\n        console.log(this.state.data)\r\n      })\r\n    } else {\r\n      this.error()\r\n      this.getData()//如果结果不存在重新请求数据,也可以提前把数据存在\r\n\r\n    }\r\n    //筛选完成后的数据\r\n  }\r\n  // --------------------   添加人员信息部分组件    ---------------------------\r\n  addInfo(e) {\r\n    e.preventDefault();\r\n    this.setState({//控制modal\r\n      visible: true,\r\n    });\r\n  }\r\n\r\n  handleOk = async (e) => {\r\n    // 通过回调函数将前端表单内容发送到后台;\r\n    console.log(this.props.form.getFieldsValue())\r\n    this.setState({\r\n      visible: false,\r\n    });\r\n\r\n    // await fetch(`http://localhost:2000/pers?act=editClerks&&num=${this.props.location.state[0].num}`,\r\n    //   {\r\n    //     method: 'POST',\r\n    //     headers: {\r\n    //       'Content-Type': 'application/json'\r\n    //     },\r\n    //     body: JSON.stringify(this.props.form.getFieldsValue())\r\n    //   }\r\n    // )\r\n    //   .then(res => res.json())\r\n    //   .then(\r\n    //     data => {\r\n    //       console.log(data)\r\n    //     })\r\n    console.log(\"使用回调函数向后台发送数据\")\r\n  }\r\n  handleCancel = (e) => {\r\n    console.log(e);\r\n    this.setState({\r\n      visible: false,\r\n    });\r\n  }\r\n  error = () => {\r\n    message.error(\"It doesn't exist !\");\r\n  };\r\n  handleResetClick() {\r\n    document.getElementById(\"indexName\").value = \"\"\r\n    this.setState({ current: 1 })\r\n    this.getData()//如果结果不存在重新请求数据,也可以提前把数据存在\r\n  }\r\n\r\n  render() {\r\n    let Page = null;\r\n    let { data } = this.state;\r\n    const { getFieldProps, getFieldError, isFieldValidating, getFieldDecorator } = this.props.form;\r\n    //--------------------    表单部分    ---------------\r\n    const title = [\"姓名\", \"性别\", \"身份证号\", \"出生年月\", \"年龄\", \"入职时间\", \"职位\", \"状态\"];\r\n    const formItemLayout = {//样式\r\n      // span是整体左移 pull是label左移   \r\n      labelCol: {\r\n        xs: { span: 24 },\r\n        offset: 2,\r\n        sm: { span: 6 }\r\n      },//左侧 offset:3\r\n      wrapperCol: { span: 10 },//input 长度控制\r\n    };\r\n    if (data) {\r\n      //  底部页码组件\r\n      Page = <Pagination\r\n        defaultCurrent={1}\r\n        pageSize={5}\r\n        total={data[0].ClerkData.length}\r\n        onChange={this.ChangePage.bind(this)}\r\n        style={{\r\n          marginRight: 30, marginTop: 25, float: \"right\"\r\n        }} />\r\n\r\n      //  目的给Form.Item 规范命名让其和数据key值相同\r\n      //  获取所有key值,num渲染时候不需要num,使用时候给删除掉\r\n     this.itemsName=Object.keys(this.state.data[0].ClerkData[0]).filter(e=>e!==\"num\");\r\n      \r\n    }\r\n    // console.log(title)\r\n    console.log(this.state)\r\n  const FormElement=function(){\r\n\r\n    console.log(this)\r\n\r\n      return(\r\n        <Form>\r\n                  {\r\n                    title.map((ele, index) =>\r\n                      <FormItem\r\n                        {...formItemLayout}\r\n                        key={ title[index]}\r\n                        label={ele}\r\n                        hasFeedback\r\n                      >\r\n                        {getFieldDecorator(title[index],\r\n                          {\r\n                            rules: [{\r\n                              required: true,\r\n                              min: 1,\r\n                              message: '输入内容至少为 1 个字符',\r\n                              pattern: new RegExp(/.+/g),\r\n                            }]\r\n                          })(\r\n                            <Input placeholder={\"请填写\" +title[index] } />\r\n                          )}\r\n                      </FormItem>\r\n                    )\r\n                  }\r\n                  </Form>\r\n      )\r\n    }\r\n\r\n    return (\r\n      <section className=\"clerk-info\">\r\n        {/*   员工信息组件  */}\r\n        <div className=\"app-container\">\r\n          <div className=\"el-serch-wrap\">\r\n            <div className=\"el-title-body\">\r\n              <Form>\r\n                <div>\r\n                  <IconFont type=\"mall-doc-glass\" style={{ fontSize: 16, marginRight: 5 }} />\r\n                  <span>筛选检索</span>\r\n                  <Button className=\"btn\" onClick={this.handleSearchClick.bind(this)} >查询结果</Button>\r\n                  <Button\r\n                    className=\"btn\"\r\n                    style={{ color: \"#1890ff\", marginRight: 20 }}\r\n                    ghost\r\n                    onClick={this.handleResetClick.bind(this)}\r\n                  >重置</Button>\r\n                </div>\r\n                <div className=\"el-form-item\">\r\n                  <span>输入检索:</span>\r\n                  <input type=\"text\" placeholder=\"请输入姓名\" id=\"indexName\">\r\n                  </input>\r\n                </div>\r\n              </Form>\r\n            </div>\r\n          </div>\r\n          <div className=\"el-title\">\r\n            <div className=\"el-title-body\">\r\n              <IconFont type=\"mall-doc-list\" style={{ fontSize: 16, marginRight: 5 }} />\r\n              <span>数据列表</span>\r\n              <button className=\"add\" onClick={this.addInfo.bind(this)}>添加人员信息</button>\r\n                \r\n              <Modal\r\n                title=\"店员信息添加\"\r\n                visible={this.state.visible}\r\n                onOk={this.handleOk}\r\n                onCancel={this.handleCancel}\r\n              >\r\n              {FormElement()}\r\n              </Modal>\r\n            </div>\r\n          </div>\r\n          <main className=\"table-container\">\r\n            <table cellPadding=\"0\" cellSpacing=\"0\">\r\n              <thead>\r\n                <tr>\r\n                  <th>工号</th>\r\n                  <th>姓名</th>\r\n                  <th>性别</th>\r\n                  <th>身份证号</th>\r\n                  <th>出生年月</th>\r\n                  <th>年龄</th>\r\n                  <th>入职时间</th>\r\n                  <th>职位</th>\r\n                  <th>状态</th>\r\n                  <th>操作</th>\r\n                </tr>\r\n              </thead>\r\n              {this.ClerksInfo(this.state.data)}\r\n            </table>\r\n          </main>\r\n          {Page}\r\n        </div>\r\n      </section>\r\n    )\r\n  }\r\n}\r\nconst WrappedDemo = Form.create({ name: 'validate_other' })(Temp);\r\n\r\nexport default withRouter(WrappedDemo)\r\n// export default Temp"]},"metadata":{},"sourceType":"module"}