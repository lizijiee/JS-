{"ast":null,"code":"import _classCallCheck from \"F:\\\\App Store\\\\Coding\\\\Github_Download\\\\JS-\\\\React\\u9879\\u76EE\\\\react-mall\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"F:\\\\App Store\\\\Coding\\\\Github_Download\\\\JS-\\\\React\\u9879\\u76EE\\\\react-mall\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"F:\\\\App Store\\\\Coding\\\\Github_Download\\\\JS-\\\\React\\u9879\\u76EE\\\\react-mall\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"F:\\\\App Store\\\\Coding\\\\Github_Download\\\\JS-\\\\React\\u9879\\u76EE\\\\react-mall\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"F:\\\\App Store\\\\Coding\\\\Github_Download\\\\JS-\\\\React\\u9879\\u76EE\\\\react-mall\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport { ComponentInterface } from '../../../fc-core/src/component-interface';\nimport { getDepsByType } from '../../../fc-core/src/dependency-manager';\nimport { raiseWarning } from '../../../fc-core/src/event-api';\n\nvar UNDEF,\n    themer,\n    BLANK = '',\n    OBJECTSTRING = 'object',\n    arrayToStr = '[object Array]',\n    objectToStr = '[object Object]',\n    isImportantRegEx = /\\s+!important$/,\n    importantStrRegEx = /\\\\!important$/,\n    getValueFromObjProperty = function getValueFromObjProperty(a, b) {\n  var c, d;\n\n  for (d in b = (b + '').toLowerCase(), a) {\n    if (a.hasOwnProperty(d) && b === (d + '').toLowerCase()) {\n      c = a[d];\n      break;\n    }\n  }\n\n  return c;\n},\n    trimString = function trimString(a) {\n  a = a.replace(/^\\s\\s*/, '');\n\n  for (var b = /\\s/, c = a.length; b.test(a.charAt(c -= 1));) {\n    ;\n  }\n\n  return a.slice(0, c + 1);\n},\n    getRegisteredThemes = function getRegisteredThemes(a) {\n  var b,\n      c = {};\n\n  for (var d in a) {\n    a.hasOwnProperty(d) && (b = a[d], c[b.name] = b);\n  }\n\n  return c;\n},\n    checkCyclicRef = function checkCyclicRef(a, b) {\n  for (var c = b.length, d = -1; c--;) {\n    if (a === b[c]) return d = c, d;\n  }\n\n  return d;\n},\n    merge = function merge(a, b, c, d, e) {\n  var f, g, h, i, j;\n  if (e ? (d.push(a), e.push(b)) : (d = [a], e = [b]), b instanceof Array) for (f = 0; f < b.length; f += 1) {\n    try {\n      g = a[f], h = b[f];\n    } catch (a) {\n      continue;\n    }\n\n    typeof h == OBJECTSTRING ? ((null === g || typeof g != OBJECTSTRING) && (g = a[f] = h instanceof Array ? [] : {}), j = checkCyclicRef(h, e), -1 === j ? merge(g, h, c, d, e) : g = a[f] = d[j]) : !(c && h === UNDEF) && (a[f] = h);\n  } else for (f in b) {\n    try {\n      g = a[f], h = b[f];\n    } catch (a) {\n      continue;\n    }\n\n    null !== h && typeof h == OBJECTSTRING ? (i = Object.prototype.toString.call(h), i === objectToStr ? ((null === g || typeof g != OBJECTSTRING) && (g = a[f] = {}), j = checkCyclicRef(h, e), -1 === j ? merge(g, h, c, d, e) : g = a[f] = d[j]) : i === arrayToStr ? ((null === g || !(g instanceof Array)) && (g = a[f] = []), j = checkCyclicRef(h, e), -1 === j ? merge(g, h, c, d, e) : g = a[f] = d[j]) : a[f] = h) : a[f] = h;\n  }\n  return a;\n},\n    extend2 = function extend2(a, b, c) {\n  return typeof a != OBJECTSTRING && typeof b != OBJECTSTRING ? null : typeof b != OBJECTSTRING || null === b ? a : (typeof a != OBJECTSTRING && (a = b instanceof Array ? [] : {}), merge(a, b, c), a);\n},\n    checkImportance = function checkImportance(a) {\n  var b = {\n    important: !1,\n    str: BLANK\n  };\n  return a ? (a = a.toString(), isImportantRegEx.test(a) ? (a = a.replace(isImportantRegEx, BLANK), b.important = !0) : (a = a.replace(importantStrRegEx, '!imporant'), b.important = !1), b.str = a, b) : b;\n},\n    mergeThemeWithData = function mergeThemeWithData(a, b) {\n  var c,\n      d,\n      e,\n      f = b.getAll();\n\n  for (c in f) {\n    d = f[c].toString(), e = checkImportance(d), e.important ? a[c.toLowerCase()] = e.str : a[c.toLowerCase()] === UNDEF && (a[c.toLowerCase()] = e.str);\n  }\n},\n    onChartTypeChange = function onChartTypeChange(a) {\n  var b,\n      c = a.sender,\n      d = c.getChartData();\n  d.error || (b = d && (d.chart && d.chart.theme || d.map && d.map.theme), b ? (d.map && (d.chart = d.map, delete d.map), themer.themify(b, c, c.chartType(), d, 'geo' === c.apiInstance.defaultSeriesType && 'geo')) : c.jsVars && c.jsVars.themeObject && c.jsVars.themeObject.dispose());\n},\n    recursiveApply = function recursiveApply(a, b) {\n  var c,\n      d,\n      e,\n      f,\n      g,\n      h,\n      j = 0,\n      k = 0;\n\n  for (c in a) {\n    if (d = a[c], d instanceof Array) for (h = d.length, g = 0; g < h; g += 1) {\n      f = d[g], 'object' == typeof f && ('category' === c ? 'true' === f.vline ? (e = b.component('vline', j, f), e && (mergeThemeWithData(f, e), j += 1)) : (e = b.component('category', k, f, h), e && (mergeThemeWithData(f, e), k += 1)) : (e = b.component(c, g, f, h), e && (mergeThemeWithData(f, e), recursiveApply(f, e))));\n    } else 'object' == typeof d && (e = b.component(c, null, d), e && (mergeThemeWithData(d, e), recursiveApply(d, e)));\n  }\n};\n\nvar ThemeManager =\n/*#__PURE__*/\nfunction (_ComponentInterface) {\n  _inherits(ThemeManager, _ComponentInterface);\n\n  function ThemeManager() {\n    _classCallCheck(this, ThemeManager);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(ThemeManager).apply(this, arguments));\n  }\n\n  _createClass(ThemeManager, [{\n    key: \"configure\",\n    value: function configure() {\n      this.config.themeStore || (this.config.themeStore = {});\n    }\n  }, {\n    key: \"add\",\n    value: function add(a) {\n      for (var b, c = this, d = 0, e = a.length; d < e; d += 1) {\n        b = a[d].name, b && (c.config.themeStore[b] = a[d]);\n      }\n    }\n  }, {\n    key: \"themify\",\n    value: function themify(a, b, c, d, e) {\n      var f,\n          g,\n          h = this,\n          j = b.jsVars,\n          k = a.split(','),\n          l = [],\n          m = k.length;\n\n      if (h.config.themeStore = getRegisteredThemes(getDepsByType('theme')), m) {\n        for (g = 0; g < m; g += 1) {\n          f = h.config.themeStore[trimString(k[g])], f && l.push(ThemeManager.evaluateThemeJSON(f.theme, b, c, e));\n        }\n\n        l.length ? (j.themeObject = new ThemeInstance(l, b, !1, d), ThemeManager.applyTheme(b), !h._attachedListeners && (b.addEventListener('chartTypeChanged', onChartTypeChange), h._attachedListeners = !0)) : raiseWarning(b, '14051100501', 'run', 'api.themes~themify()', 'The theme \"' + a + '\" requested has not been registered.');\n      }\n    }\n  }], [{\n    key: \"evaluateThemeJSON\",\n    value: function evaluateThemeJSON(a, b, c, d) {\n      var e,\n          f,\n          g = {},\n          h = b.jsVars,\n          i = function i(a) {\n        var b, c;\n\n        for (b in a) {\n          c = a[b], g[b] = c instanceof Array ? extend2(g[b] || [], c) : 'object' == typeof c ? extend2(g[b] || {}, c) : c;\n        }\n      };\n\n      return c = c || b.chartType(), h.themeObject && a !== h.themeObject && (h.themeObject.dispose(), delete h.themeObject), i(getValueFromObjProperty(a, 'base')), d && (e = getValueFromObjProperty(a, d)), e && i(e), c && (f = getValueFromObjProperty(a, c)), f && i(f), g;\n    }\n  }, {\n    key: \"applyTheme\",\n    value: function applyTheme(a) {\n      var b = a.jsVars.themeObject,\n          c = b.getThemedJSONData().data;\n      c && recursiveApply(c, b);\n    }\n  }]);\n\n  return ThemeManager;\n}(ComponentInterface);\n\nvar ThemeInstance =\n/*#__PURE__*/\nfunction (_ComponentInterface2) {\n  _inherits(ThemeInstance, _ComponentInterface2);\n\n  function ThemeInstance(a, b, c, d) {\n    var _this;\n\n    _classCallCheck(this, ThemeInstance);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ThemeInstance).call(this));\n    var e,\n        f = 0;\n\n    for (_this.themeArray = a, _this.themeComponents = {}, _this.base = {}, _this.chartInstance = b, _this.isChildInstance = !!c, _this.themedData = c ? null : extend2({}, d), _this.length = a.length, e = a.length; f < e; f += 1) {\n      _this.parse(a[f]);\n    }\n\n    return _this;\n  }\n\n  _createClass(ThemeInstance, [{\n    key: \"pushTheme\",\n    value: function pushTheme(a) {\n      a && (this.themeArray.push(a), this.parse(a), this.length += 1);\n    }\n  }, {\n    key: \"parse\",\n    value: function parse(a) {\n      var b,\n          c,\n          d,\n          e,\n          f,\n          g = this,\n          h = g.themeComponents,\n          i = g.chartInstance,\n          j = g.base;\n\n      for (c in f = a, f) {\n        'string' == typeof f[c] || 'number' == typeof f[c] ? j[c] ? (d = checkImportance(f[c]), e = checkImportance(j[c]), (d.important || !e.important) && (j[c] = f[c])) : j[c] = f[c] : (h[c] || (h[c] = []), b = h[c], f[c] instanceof Array ? b.push(extend2([], f[c])) : 'object' == typeof f[c] ? b.push(new ThemeInstance([f[c]], i, !0)) : 'function' == typeof f[c] && b.push(f[c]));\n      }\n    }\n  }, {\n    key: \"merge\",\n    value: function merge(a) {\n      var b,\n          c,\n          d,\n          e = this,\n          f = e.base,\n          g = a.base,\n          h = e.themeComponents,\n          i = a.themeComponents;\n\n      for (d in g) {\n        b = checkImportance(f[d]), c = checkImportance(g[d]), (!b.important || c.important) && (f[d] = g[d]);\n      }\n\n      for (d in i) {\n        h[d] = h[d] ? h[d].concat(i[d]) : [].concat(i[d]);\n      }\n\n      e.length += a.length;\n    }\n  }, {\n    key: \"get\",\n    value: function get(a) {\n      return this.base[a];\n    }\n  }, {\n    key: \"getAll\",\n    value: function getAll() {\n      return extend2({}, this.base);\n    }\n  }, {\n    key: \"component\",\n    value: function component(a, b, c, d) {\n      var e,\n          f,\n          g,\n          h,\n          j,\n          k,\n          l = this,\n          m = l.themeComponents,\n          n = l.chartInstance,\n          o = new ThemeInstance([], n, !0);\n      if (j = m[a], !j) return null;\n\n      for (f = 0, g = j.length; f < g; f += 1) {\n        k = j[f], 'function' == typeof k ? (b = b || 0, o.pushTheme(k.call(n, b, c, d))) : k instanceof Array ? (b = b || 0, h = k.length, b %= h, e = k[b], e instanceof ThemeInstance ? o.merge(e) : 'function' == typeof e ? o.pushTheme(e.call(n, b, c, d)) : o.pushTheme(e)) : k instanceof ThemeInstance ? o.merge(k) : o.pushTheme(k);\n      }\n\n      return o;\n    }\n  }, {\n    key: \"getThemedJSONData\",\n    value: function getThemedJSONData() {\n      return {\n        data: this.themedData\n      };\n    }\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      var a,\n          b,\n          c = this,\n          d = c.themeComponents,\n          e = c.chartInstance;\n\n      for (a in d) {\n        if (b = d[a].length, b) {\n          for (; b--;) {\n            d[a][b].dispose && d[a][b].dispose();\n          }\n\n          delete d[a];\n        }\n      }\n\n      c.isChildInstance || e.removeEventListener('chartTypeChanged', onChartTypeChange), c.themeComponents = null, c.chartInstance = null, c.base = null, c.themeArray = null, c.isChildInstance = null, c.dataWithoutTheme = null;\n    }\n  }]);\n\n  return ThemeInstance;\n}(ComponentInterface);\n\nthemer = new ThemeManager(), themer.configure();\n\nfunction FCPlugger(a) {\n  a.addEventListener('beforedataload', function (b) {\n    var c,\n        d,\n        e,\n        f = b.sender,\n        g = getRegisteredThemes(getDepsByType('theme')),\n        h = f.getChartData(),\n        j = a.options.defaultTheme,\n        k = h && (h.chart && h.chart.theme || h.map && h.map.theme),\n        l = (j || k) && \"\".concat(j || '', \",\").concat(k || ''),\n        m = l && l.split(','),\n        n = m && m.length,\n        o = !1;\n\n    for (d = 0; d < n; d++) {\n      e = trimString(m[d]), g && '' !== e && g.hasOwnProperty(e) && (o = !0);\n    }\n\n    o ? (c = f.chartType(), h.map && (h.chart = h.map, delete h.map), themer.themify(l, f, c, h, 'geo' === f.apiInstance.defaultSeriesType && 'geo')) : f.jsVars && f.jsVars.themeObject && (f.jsVars && f.jsVars.themeObject.dispose(), f.jsVars && delete f.jsVars.themeObject);\n  });\n}\n\nexport default {\n  extension: FCPlugger,\n  name: 'ThemeEngine',\n  type: 'extension',\n  requiresFusionCharts: !0\n};","map":null,"metadata":{},"sourceType":"module"}