{"ast":null,"code":"import _classCallCheck from \"F:\\\\App Store\\\\Coding\\\\Github_Download\\\\JS-\\\\React\\u9879\\u76EE\\\\react-mall\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"F:\\\\App Store\\\\Coding\\\\Github_Download\\\\JS-\\\\React\\u9879\\u76EE\\\\react-mall\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"F:\\\\App Store\\\\Coding\\\\Github_Download\\\\JS-\\\\React\\u9879\\u76EE\\\\react-mall\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"F:\\\\App Store\\\\Coding\\\\Github_Download\\\\JS-\\\\React\\u9879\\u76EE\\\\react-mall\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"F:\\\\App Store\\\\Coding\\\\Github_Download\\\\JS-\\\\React\\u9879\\u76EE\\\\react-mall\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"F:\\\\App Store\\\\Coding\\\\Github_Download\\\\JS-\\\\React\\u9879\\u76EE\\\\react-mall\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport { getMouseCoordinate, pluckNumber, pluck, hasSVG } from '../../../fc-core/src/lib';\nimport { ComponentInterface } from '../../../fc-core/src/component-interface';\n\nvar UNDEF,\n    DEFAULTCOLOR = '#EEEEEE',\n    DEFAULTALPHA = 50,\n    crispFixer = hasSVG ? 0 : .5,\n    crisping = function crisping(a, b) {\n  return Math.round(a + (b % 2 / 2 + crispFixer)) - (b % 2 / 2 + crispFixer);\n},\n    handlers = function handlers(a) {\n  return {\n    onhover: function onhover(b, c) {\n      a.show(c.axes ? {\n        axesInfo: c.axes\n      } : {\n        event: b\n      });\n    },\n    onhoverout: function onhoverout(b) {\n      a.hide({\n        event: b\n      });\n    }\n  };\n},\n    createRaphaelGroup = function createRaphaelGroup(a, b, c) {\n  var d = c.getFromEnv('animationManager');\n  return d.setAnimation({\n    el: 'group',\n    attr: {\n      name: a\n    },\n    container: b,\n    state: 'appearing',\n    component: c,\n    label: 'group'\n  });\n};\n\nvar CrossLineManagerBand =\n/*#__PURE__*/\nfunction (_ComponentInterface) {\n  _inherits(CrossLineManagerBand, _ComponentInterface);\n\n  function CrossLineManagerBand() {\n    var _this;\n\n    _classCallCheck(this, CrossLineManagerBand);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(CrossLineManagerBand).call(this)), _this._handlerAPI = handlers(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(CrossLineManagerBand, [{\n    key: \"getAttachedAxisInfo\",\n    value: function getAttachedAxisInfo() {\n      var a = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var b,\n          c,\n          d,\n          e,\n          f = this,\n          g = f.getLinkedParent(),\n          h = g.getAxes(),\n          j = a.originalEvent && getMouseCoordinate(f.getFromEnv('chart-container'), a.originalEvent, f.getFromEnv('chart')),\n          k = j && j.chartX || 0,\n          l = j && j.chartY || 0;\n\n      for (b = h.length - 1; 0 <= b; b--) {\n        if (c = h[b].axis, d = h[b].isY, !d) return e = !!c.config.isVertical, {\n          value: e ? c.getValue(l) : c.getValue(k),\n          axis: c,\n          isVertical: e,\n          isY: !1\n        };\n      }\n    }\n  }, {\n    key: \"configure\",\n    value: function configure() {\n      var a = this,\n          b = a.config,\n          c = a.getFromEnv('chartConfig'),\n          d = a.getFromEnv('chart-attrib'),\n          e = pluck(d.crosslinecolor, c.crosslinecolor, DEFAULTCOLOR),\n          f = pluckNumber(c.defaultcrosslinethickness),\n          g = pluckNumber(d.crosslineanimation, 0),\n          h = g && 1e3 * pluckNumber(d.crosslineanimationduration, .09),\n          i = pluckNumber(d.drawcrosslineontop, c.drawcrosslineontop, 0),\n          j = pluckNumber(d.crosslinealpha, c.crosslinealpha, DEFAULTALPHA);\n      b.drawCrossLine = pluckNumber(d.drawcrossline, c.drawcrossline, 0), b.bandStyle = {\n        fillcolor: e,\n        alpha: j,\n        thickness: f,\n        managerId: a.getId(),\n        onTop: i,\n        cursor: 'pointer',\n        animDuration: h\n      };\n    }\n  }, {\n    key: \"createGroup\",\n    value: function createGroup() {\n      var a = this,\n          b = a.getLinkedParent().getChildContainer('crosslineBottom'),\n          c = a.getLinkedParent().getChildContainer('crosslineTop');\n      a.getChildContainer('crosslineTop') || a.addChildContainer('crosslineTop', createRaphaelGroup('crosslineTop', c, a)), a.getChildContainer('crosslineBottom') || a.addChildContainer('crosslineBottom', createRaphaelGroup('crosslineBottom', b, a));\n    }\n  }, {\n    key: \"show\",\n    value: function show() {\n      var a = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var b = this,\n          c = a.event,\n          d = b.config;\n      d.attachedCanvasAxisInfo = b.getAttachedAxisInfo(c), b._setAptAxesInfo(a.axesInfo, a.value), b._show(c);\n    }\n  }, {\n    key: \"_setAptAxesInfo\",\n    value: function _setAptAxesInfo() {\n      var a = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n      var b = arguments.length > 1 ? arguments[1] : undefined;\n      var c,\n          d,\n          e = this,\n          f = a.length,\n          g = e.config.attachedCanvasAxisInfo;\n      if (a.length) for (d = 0; d < f; d++) {\n        if (c = a[d], c.axis === g.axis) {\n          g.value = c.value;\n          break;\n        }\n      }\n      b !== UNDEF && (g.value = b);\n    }\n  }, {\n    key: \"_show\",\n    value: function _show(a) {\n      var b,\n          c,\n          d,\n          e,\n          f = this,\n          g = f.config,\n          h = f.getFromEnv('chartConfig'),\n          i = f.getChildren('crossline')[0],\n          j = g.attachedCanvasAxisInfo,\n          k = j.value,\n          l = j.axis,\n          m = j.isVertical,\n          n = l.config.endPad,\n          o = l.getVisibleConfig().maxValue - n,\n          p = Math.round(k),\n          q = j.axis.getPixel(p),\n          r = Object.assign({}, g.bandStyle),\n          s = f.getFromEnv('canvasConfig'),\n          t = s.canvasTop,\n          u = s.canvasLeft,\n          v = s.canvasWidth,\n          w = s.canvasHeight,\n          x = g.drawCrossLine;\n      0 > p || p > o || f.config.lastIndex !== p && x && ((d = r.thickness) === UNDEF && (!1 === h._hascolumn ? d = 1 : (b = l.getPixel(0), c = l.getPixel(1), d = Math.abs(c - b))), e = crisping(q, d), f.createGroup(), r.thickness = d, r = m ? Object.assign(r, {\n        x1: u,\n        y1: e,\n        x2: u + v,\n        y2: e\n      }) : Object.assign(r, {\n        x1: e,\n        y1: t,\n        x2: e,\n        y2: t + w\n      }), i.show(r), f.getFromEnv('chart').fireChartInstanceEvent('onChangeCrossLine', {\n        currentIndex: p,\n        lastIndex: f.config.lastIndex,\n        source: a ? 'mouse interaction' : 'public API'\n      }), f.config.lastIndex = p);\n    }\n  }, {\n    key: \"hide\",\n    value: function hide() {\n      var a = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var b = this,\n          c = b.getLinkedParent(),\n          d = a.event,\n          e = d && d.originalEvent && getMouseCoordinate(c.getFromEnv('chart-container'), d && d.originalEvent, c.getFromEnv('chart')),\n          f = e && e.chartX || 0,\n          g = e && e.chartY || 0;\n      c.isWithinCanvas(f, g) || (b.getFromEnv('chart').fireChartInstanceEvent('onChangeCrossLine', {\n        lastIndex: b.config.lastIndex,\n        source: d ? 'mouse interaction' : 'public API'\n      }), delete this.config.lastIndex, this.getChildren('crossline')[0].hide());\n    }\n  }, {\n    key: \"getType\",\n    value: function getType() {\n      return 'crossline-manager';\n    }\n  }, {\n    key: \"getName\",\n    value: function getName() {\n      return 'crossline-manager-band-category-axis';\n    }\n  }]);\n\n  return CrossLineManagerBand;\n}(ComponentInterface);\n\nexport default CrossLineManagerBand;","map":null,"metadata":{},"sourceType":"module"}