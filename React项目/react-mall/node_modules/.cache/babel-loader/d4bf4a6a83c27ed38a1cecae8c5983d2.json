{"ast":null,"code":"var initState = {\n  num: 1,\n  addedIds: [],\n  quantityById: {} //state 初始值分别为简单类型和复合类型\n\n};\n\nvar reducer = function reducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initState;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  state = JSON.parse(JSON.stringify(state)); //initState为复合类型需要深克隆一下;\n\n  switch (action.type) {\n    case \"INCREMENT\":\n      console.log(state);\n      state.num += 1; //简单类型直接+1 就可以了\n\n      break;\n\n    case \"DECREMENT\":\n      state.num -= 1;\n      break;\n  }\n\n  return state;\n};\n\nexport { reducer };\n/* 测试 */\n\n/* \r\nconst initialState = {\r\n  addedIds: [],\r\n  quantityById: {}\r\n}\r\n\r\nconst addedIds = (state = initialState.addedIds, action) => {\r\n  switch (action.type) {\r\n    case ADD_TO_CART:\r\n      if (state.indexOf(action.productId) !== -1) {\r\n        return state\r\n      }\r\n      return [ ...state, action.productId ]\r\n    default:\r\n      return state\r\n  }\r\n}\r\nconst quantityById = (state = initialState.quantityById, action) => {\r\n  switch (action.type) {\r\n    case ADD_TO_CART:\r\n      const { productId } = action\r\n      return { ...state,\r\n        [productId]: (state[productId] || 0) + 1\r\n      }\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nexport const getQuantity = (state, productId) =>\r\n  state.quantityById[productId] || 0\r\n\r\nexport const getAddedIds = state => state.addedIds\r\n\r\nconst cart = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case CHECKOUT_REQUEST:\r\n      return initialState\r\n    case CHECKOUT_FAILURE:\r\n      return action.cart\r\n    default:\r\n      return {\r\n        addedIds: addedIds(state.addedIds, action),\r\n        quantityById: quantityById(state.quantityById, action)\r\n      }\r\n  }\r\n}\r\n\r\nexport default cart\r\n */","map":{"version":3,"sources":["F:\\App Store\\Coding\\Github_Download\\JS-\\React项目\\react-mall\\src\\redux\\reducers\\index.js"],"names":["initState","num","addedIds","quantityById","reducer","state","action","JSON","parse","stringify","type","console","log"],"mappings":"AAAA,IAAMA,SAAS,GAAG;AAChBC,EAAAA,GAAG,EAAC,CADY;AAEhBC,EAAAA,QAAQ,EAAE,EAFM;AAGhBC,EAAAA,YAAY,EAAE,EAHE,CAKlB;;AALkB,CAAlB;;AAMA,IAAMC,OAAO,GAAE,SAATA,OAAS,GAA0B;AAAA,MAAzBC,KAAyB,uEAAnBL,SAAmB;AAAA,MAATM,MAAS;AACnCD,EAAAA,KAAK,GAAGE,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,SAAL,CAAeJ,KAAf,CAAX,CAAR,CADmC,CACO;;AACxC,UAAOC,MAAM,CAACI,IAAd;AACI,SAAK,WAAL;AACEC,MAAAA,OAAO,CAACC,GAAR,CAAYP,KAAZ;AACAA,MAAAA,KAAK,CAACJ,GAAN,IAAa,CAAb,CAFF,CAEkB;;AAClB;;AACA,SAAK,WAAL;AACEI,MAAAA,KAAK,CAACJ,GAAN,IAAa,CAAb;AACF;AAPJ;;AASA,SAAOI,KAAP;AACH,CAZL;;AAaI,SAASD,OAAT;AACJ;;AAEA","sourcesContent":["const initState = {\r\n  num:1,\r\n  addedIds: [],\r\n  quantityById: {}\r\n}\r\n//state 初始值分别为简单类型和复合类型\r\nconst reducer= (state=initState,action)=>{ \r\n      state = JSON.parse(JSON.stringify(state));//initState为复合类型需要深克隆一下;\r\n        switch(action.type){\r\n            case \"INCREMENT\":\r\n              console.log(state);\r\n              state.num += 1  //简单类型直接+1 就可以了\r\n            break;\r\n            case \"DECREMENT\":\r\n              state.num -= 1;\r\n            break;\r\n        }\r\n        return state;\r\n    }\r\n    export  {reducer}\r\n/* 测试 */\r\n\r\n/* \r\nconst initialState = {\r\n  addedIds: [],\r\n  quantityById: {}\r\n}\r\n\r\nconst addedIds = (state = initialState.addedIds, action) => {\r\n  switch (action.type) {\r\n    case ADD_TO_CART:\r\n      if (state.indexOf(action.productId) !== -1) {\r\n        return state\r\n      }\r\n      return [ ...state, action.productId ]\r\n    default:\r\n      return state\r\n  }\r\n}\r\nconst quantityById = (state = initialState.quantityById, action) => {\r\n  switch (action.type) {\r\n    case ADD_TO_CART:\r\n      const { productId } = action\r\n      return { ...state,\r\n        [productId]: (state[productId] || 0) + 1\r\n      }\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nexport const getQuantity = (state, productId) =>\r\n  state.quantityById[productId] || 0\r\n\r\nexport const getAddedIds = state => state.addedIds\r\n\r\nconst cart = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case CHECKOUT_REQUEST:\r\n      return initialState\r\n    case CHECKOUT_FAILURE:\r\n      return action.cart\r\n    default:\r\n      return {\r\n        addedIds: addedIds(state.addedIds, action),\r\n        quantityById: quantityById(state.quantityById, action)\r\n      }\r\n  }\r\n}\r\n\r\nexport default cart\r\n */"]},"metadata":{},"sourceType":"module"}