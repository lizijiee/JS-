{"ast":null,"code":"import extend2 from '../_internal/vendors/redraphael/source/raphael.lib';\n\nvar gDefs,\n    SPACE = ' ',\n    win = window,\n    doc = win.document,\n    hasTouch = 'ontouchstart' in win,\n    BE = {\n  click: 'click',\n  touchstart: 'touchstart',\n  touchend: 'touchend',\n  touchmove: 'touchmove',\n  mousedown: 'mousedown',\n  mouseup: 'mouseup',\n  mousemove: 'mousemove',\n  mouseout: 'mouseout',\n  mouseover: 'mouseover',\n  keydown: 'keydown'\n},\n    gestures = function () {\n  var a,\n      b = {};\n  return b.pointerdrag = {\n    start: [BE.mousedown],\n    end: [BE.mouseup],\n    onStart: [BE.mousemove],\n    postHandlers: {},\n    preHandlers: {}\n  }, b.pointerhover = {\n    start: [BE.mouseover],\n    end: [BE.mouseout]\n  }, b.click = {\n    start: [BE.click]\n  }, b.escape = {\n    start: [BE.keydown],\n    preHandlers: {\n      start: function start(a) {\n        return a = a || win.event, !!(a.keyCode && 27 === a.keyCode);\n      }\n    }\n  }, hasTouch && (a = b.pointerdrag, a.start.push(BE.touchstart), a.end.push(BE.touchend), a.onStart.push(BE.touchmove), a.postHandlers.onStart = function (a) {\n    a.preventDefault ? a.preventDefault() : a.returnValue = !1;\n  }), b;\n}();\n\nfunction defineGestures() {\n  var a = extend2({}, gestures);\n  return a;\n}\n\ngDefs = defineGestures();\n\nfunction DOMEventFx() {\n  var a = {},\n      b = {},\n      c = doc.addEventListener ? function (a, b, c) {\n    a.addEventListener(b, c, !1);\n  } : function (a, b, c) {\n    a.attachEvent('on' + b, c);\n  },\n      d = doc.removeEventListener ? function (a, b, c) {\n    a.removeEventListener(b, c, !1);\n  } : function (a, b, c) {\n    a.detachEvent('on' + b, c);\n  },\n      e = function e(a, b, _e, f) {\n    var g;\n    return f = f || 'closure', c(a, b, _e[f]), g = function g() {\n      d(a, b, _e[f]);\n    }, g;\n  },\n      f = function f(a, b, c) {\n    var d,\n        f,\n        g,\n        h,\n        j = [];\n    if (h = gDefs[b], c.start = function (b) {\n      var d = h.onStart,\n          f = h.end,\n          g = [],\n          j = [],\n          k = d && d.length || 0;\n\n      for (b = b || win.event; k--;) {\n        g.push(e(a, d[k], c, 'onStart'));\n      }\n\n      for (k = f && f.length || 0; k--;) {\n        j.push(e(a, f[k], c, 'end'));\n      }\n\n      c.startUn = c.startUn ? c.startUn.concat(g) : g, c.endUn = c.endUn ? c.endUn.concat(j) : j, c.state = 'start', c.closure(b);\n    }, c.onStart = function (a) {\n      a = a || win.event, c.state = 'on', c.gDef && c.gDef.preHandlers && 'function' == typeof c.gDef.preHandlers.onStart && c.gDef.preHandlers.onStart(a), c.closure(a), c.gDef && c.gDef.postHandlers && 'function' == typeof c.gDef.postHandlers.onStart && c.gDef.postHandlers.onStart(a);\n    }, c.end = function (a) {\n      var b = c.startUn,\n          d = c.endUn,\n          e = b && b.length || 0;\n\n      for (a = a || win.event; e--;) {\n        b[e]();\n      }\n\n      for (delete c.startUn, c.startUn = [], e = d && d.length || 0; e--;) {\n        d[e]();\n      }\n\n      delete c.endUn, c.endUn = [], c.state = 'end', c.closure(a);\n    }, h) for (d = h.start, g = d.length; g--;) {\n      f = d[g], f && j.push(e(a, f, c, 'start'));\n    }\n    return j;\n  },\n      g = function g(a, b, c) {\n    var e, f, g, h;\n    if (h = gDefs[b], h) for (e = h.start, g = e.length; g--;) {\n      f = e[g], f && d(a, f, c.start);\n    }\n  },\n      h = function h(a) {\n    return function (b) {\n      var c,\n          d = a.context || a.elem;\n      b = b.originalEvent || b, c = {\n        data: a.data,\n        type: a.type,\n        state: a.state,\n        isGesture: a.isGesture,\n        target: b.target || b.srcElement,\n        originalEvent: b\n      }, b = b || win.event, a.handler.call(d, c);\n    };\n  };\n\n  return {\n    listen: function listen(c, d, g, j, k) {\n      var l,\n          m,\n          n,\n          o,\n          p,\n          q = this,\n          r = 'string' == typeof d ? d.split(SPACE) : d,\n          s = r.length,\n          t = [],\n          u = function u(a, b, c) {\n        t.push(function () {\n          q.unlisten(a, b, c);\n        });\n      };\n\n      if (!c.ownerDocument || c.ownerDocument !== doc) for (; s--;) {\n        m = r[s], p = 'function' == typeof g ? g : g[s], n = {\n          handler: p,\n          elem: c,\n          type: m,\n          isGesture: o,\n          data: j,\n          context: k,\n          start: [],\n          end: [],\n          links: {\n            prev: null,\n            next: null\n          }\n        }, n.closure = h(n), l = a[m], l || (l = a[m] = []), l.push(n), e(c, m, n), u(c, m, p);\n      } else for (; s--;) {\n        m = r[s], o = !!gDefs[m], p = 'function' == typeof g ? g : g[s], n = {\n          handler: p,\n          elem: c,\n          type: m,\n          isGesture: o,\n          gDef: o ? gDefs[m] : null,\n          data: j,\n          context: k,\n          start: [],\n          end: [],\n          links: {\n            prev: null,\n            next: null\n          }\n        }, n.closure = h(n), o ? (l = b[m], !l && (l = b[m] = []), l.push(n), f(c, m, n)) : (l = a[m], !l && (l = a[m] = []), l.push(n), e(c, m, n)), u(c, m, p);\n      }\n      return {\n        unlisten: function unlisten() {\n          for (var a = t.length; a--;) {\n            t[a]();\n          }\n\n          t.length = 0, t = null;\n        }\n      };\n    },\n    unlisten: function unlisten(c, e, f) {\n      var h,\n          j,\n          k,\n          l = !!gDefs[e],\n          m = !1;\n      if (!l) for (h = a[e], j = h && h.length || 0; j--;) {\n        k = h[j], k.handler === f && k.elem === c && (d(c, e, k.closure), h.splice(j, 1), m = !0);\n      } else for (h = b[e], j = h && h.length || 0; j--;) {\n        k = h[j], k.handler === f && k.elem === c && (g(c, e, k), h.splice(j, 1), m = !0);\n      }\n      return m;\n    },\n    fire: function fire(b, c, d, e) {\n      var f, g, h, j;\n      if (!b.ownerDocument || b.ownerDocument !== doc) for (f = a[c], g = f && f.length || 0; g--;) {\n        h = f[g], h.elem === b && h.closure(d);\n      } else doc.createEvent ? (j = doc.createEvent('HTMLEvents'), j.initEvent(c, !0, !0), d && d.originalEvent && (d.originalEvent = j), 'function' == typeof b[c] && b[c](), b.dispatchEvent(j), e && !j.returnValue && e(j)) : (j = doc.createEventObject(), j.eventType = c, d && (d.originalEvent ? d.originalEvent = j : extend2(j, d)), 'function' == typeof b[c] && b[c](), b.fireEvent('on' + c, j), e && !j.returnValue && e(j));\n    }\n  };\n}\n\nexport default new DOMEventFx();","map":null,"metadata":{},"sourceType":"module"}