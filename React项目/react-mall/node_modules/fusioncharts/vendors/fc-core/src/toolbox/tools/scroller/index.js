import{stubFN,pluckNumber,convertColor}from'../../../lib';import Tool from'../tool';import ScrollTrack from'./scroll-track';import ScrollAnchor from'./scroll-anchor';import ScrollButtons from'./scroll-buttons';import{mergeConf}from'../helper';let UNDEF;class Scroller extends Tool{configureAttributes(a={}){super.configureAttributes(a);let b=this.config,c=this.getFromEnv('chart-attrib');b.conf={},b.color=c.scrollcolor&&convertColor(c.scrollcolor),b.padding=pluckNumber(c.scrollpadding,0),b.height=pluckNumber(c.scrollheight,12),b.width=pluckNumber(c.scrollwidth,12),b.displayFlat=pluckNumber(c.flatscrollbars,0),b.scrollBar3DLighting=pluckNumber(c.scrollbar3dlighting,1),b.startPercent=Math.min(1,Math.max(0,parseFloat(c.scrolltoend)||0)),b.showButtons=!!pluckNumber(c.scrollshowbuttons,1),b.buttonPadding=pluckNumber(c.scrollbtnpadding,0),b.anchorFill=a.anchorFill,b.anchorStroke=a.anchorStroke,b.trackFill=a.trackFill,b.trackStroke=a.trackStroke,b.buttonFill=a.buttonFill,b.buttonStroke=a.buttonStroke,b.buttonPointerFill=a.buttonPointerFill,b.drawStripes=a.drawStripes,b.stripesStroke=a.stripesStroke,b.restrictScrollAnchor=pluckNumber(a.restrictScrollAnchor,1),this.setConfiguaration(a),b.evt={tooltext:UNDEF,click:stubFN,hover:[stubFN,stubFN]},this.createScrollItems()}createScrollItems(){let a=this,b=this.config,c=a.getChildren('scrollTrack')&&a.getChildren('scrollTrack')[0],d=a.getChildren('scrollAnchor')&&a.getChildren('scrollAnchor')[0],e=a.getChildren('scrollButtons')&&a.getChildren('scrollButtons')[0],f=a.getChildren('scrollButtons')&&a.getChildren('scrollButtons')[0];c||(c=a.attachChild(ScrollTrack,'scrollTrack'),c.configure({trackFill:b.trackFill,trackStroke:b.trackStroke}),c.attachEventHandlers()),d||(d=a.attachChild(ScrollAnchor,'scrollAnchor'),d.configure({anchorFill:b.anchorFill,anchorStroke:b.anchorStroke,drawStripes:b.drawStripes,stripesStroke:b.stripesStroke}),d.attachEventHandlers()),!e&&b.showButtons&&(e=a.attachChild(ScrollButtons,'scrollStartButton'),e.configure({type:'start',buttonFill:b.buttonFill,buttonStroke:b.buttonStroke,buttonPointerFill:b.buttonPointerFill}),e.attachEventHandlers()),!f&&b.showButtons&&(f=a.attachChild(ScrollButtons,'scrollEndButton'),f.configure({type:'end',buttonFill:b.buttonFill,buttonStroke:b.buttonStroke,buttonPointerFill:b.buttonPointerFill}),f.attachEventHandlers())}getName(){return'scroller'}getType(){return'scroller'}setConfiguaration(a){var b=this.config,c=this.getFromEnv('chart'),d=c.getFromEnv('color-manager');b.color||(b.color='#'+d.getColor('altHGridColor')),mergeConf(a,b)}getLogicalSpace(){var a=this.config,b=a.conf,c={};return mergeConf(a,c),mergeConf(c,b),super.getLogicalSpace()}setDimension(a){super.setDimension(a);let b=this,c=b.getLinkedParent(),d=c.getPosition&&c.getPosition()||{},e=b.getChildren('scrollTrack')[0].config;e.transLateX=d.x||0,e.transLateY=d.y||0}draw(){let a=this,b=a.config,c=b.conf,d={};c.isHorizontal?delete d.width:delete d.height,mergeConf(d,b,!0),a.addGraphicalElement({el:'group',attr:{name:'scrollContainer'},component:a,container:{id:'scrollerContainer',label:'scroller',isParent:!0},label:'scrollerGroup',id:'scrollerGroup'})}attachEventHandlers(a){var b=this,c=this.config,d=c.evt;return a&&(a.scroll&&'function'==typeof a.scroll&&(d.scroll=a.scroll),a.scrollStart&&'function'==typeof a.scrollStart&&(d.scrollStart=a.scrollStart),a.scrollEnd&&'function'==typeof a.scrollEnd&&(d.scrollEnd=a.scrollEnd)),b}}Scroller.registerSymbol=UNDEF,Scroller._setConfiguaration=stubFN;export default Scroller;