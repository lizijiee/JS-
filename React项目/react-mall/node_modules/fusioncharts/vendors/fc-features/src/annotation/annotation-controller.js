import{SmartRenderer}from'../../../fc-core/src/component-interface';import{pluckNumber}from'../../../fc-core/src/lib';import AnnotationGroup from'./shapes/annotation-group';import CircleAnnotation from'./shapes/annotation-circle';import PathAnnotation from'./shapes/annotation-path';import RectAnnotation from'./shapes/annotation-rect';import PolygonAnnotation from'./shapes/annotation-polygon';import ImageAnnotation from'./shapes/annotation-image';import TextAnnotation from'./shapes/annotation-text';const shapeMap={circle:CircleAnnotation,arc:CircleAnnotation,line:PathAnnotation,path:PathAnnotation,rectangle:RectAnnotation,polygon:PolygonAnnotation,image:ImageAnnotation,text:TextAnnotation};class AnnotationController extends SmartRenderer{createItem(a,b){let c,d,e=this;if('group'===a.annotationType)a.groupXShift=pluckNumber(a.groupXShift,this.config.groupXShift),a.groupYShift=pluckNumber(a.groupYShift,this.config.groupYShift),c=e.attachChild(AnnotationGroup,'group',a.id),e.config.lastCreatedGroup=c;else{if(d=a.type&&a.type.toLowerCase(),c=b.attachChild(shapeMap[d],'item',a.id),!c)return;e.config.lastCreatedItem=c}return c._setToStore('component',a.component),c.configure(a),c}retrieveItem(a,b){let c,d,e;for(e in this.groups)if(c=this.groups[e].retrieveItem(a,b),c){d=c;break}return d}retrieveGroup(a,b){let c,d,e=this;if(b)e.detachChild(a);else for(c=0,d=e.groups.length;c<d;c++)if(e.groups[c].getId()===a)return e.groups[c]}show(a){let b;a?(b=this.retrieveItem(a)||this.retrieveGroup(a),b&&b.show()):this.groups.forEach(a=>{a.show(),a.items.forEach(a=>{a.show()})})}hide(a){let b;a?(b=this.retrieveItem(a)||this.retrieveGroup(a),b&&b.hide()):this.groups.forEach(a=>{a.hide(),a.items.forEach(a=>{a.hide()})})}dispose(){let a,b,c,d,e,f,g=this,h=g.config;if(h.groups){for(c=h.groups.length,a=c-1;0<=a;a--){for(e=h.groups[a],d=e.items&&e.items.length,b=d-1;0<=b;b--)f=e.items[b],f&&f.dispose();e.items=[],e.dispose()}h.groups=[]}}disposeConfiguration(){let a=this,b=a.config;b.parsedConfigs=[],b.groups=[]}}export default AnnotationController;