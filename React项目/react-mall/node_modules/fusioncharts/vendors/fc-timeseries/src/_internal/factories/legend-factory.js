import Legend from'../../../../fc-charts/src/_internal/components/legend/discrete';import{componentFactory,pluck}from'../../../../fc-core/src/lib';const COLOR_5F5F5F='#5f5f5f';export default(a=>{let b,c=a.getFromEnv('dataSource'),d=a.getFromEnv('getStyleDef'),e=c.legend,f=a.config.showLegend,g=d(e&&e.item&&e.item.style&&e.item.style.text),h=pluck(g.fill,COLOR_5F5F5F);if(f){componentFactory(a,Legend,'legend',1,[{drawcustomlegendicon:1,legendiconsides:4,alignlegendwithcanvas:1,legendborderthickness:0,legendiconscale:1.3,legendbgalpha:0,legendFontColor:h,style:{text:g}}]),b=a.getChildren('legend')[0],a.addToEnv('legend',b);const c=(b={})=>{for(const d in b)if(b.hasOwnProperty(d)){const e=b[d];e.hasOwnProperty('visibility')?a._addLegend(e):c(e)}};c(a.getFromEnv('legendMap'))}else(b=a.getChildren('legend')&&a.getChildren('legend')[0])&&b.remove()});