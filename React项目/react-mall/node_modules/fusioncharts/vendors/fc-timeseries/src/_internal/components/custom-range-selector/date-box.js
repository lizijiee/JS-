import{SmartRenderer}from'../../../../../fc-core/src/component-interface';import{PXSTRING,DEFAULT_FT_FONT}from'../../../../../fc-core/src/lib';const DEFAULT_INPUT_BOX_WIDTH=65,validDateLen=[2,2,4],formatDate=a=>(10>a?'0'+a:a)+'';class DateBox extends SmartRenderer{constructor(a){super(a),this.addEventListener('blur',function(a){let b,c=this.getLinkedParent(),d=a.originalEvent.target.value+'',e=d.split('/'),f=e.length;if(3===f){for(b=0;b<f;b++)if(isNaN(e[b])||e[b].length!==validDateLen[b])return;c.updateCalendar({day:+e[0],month:+e[1],year:+e[2]},this.config.id)}})}__setDefaultConfig(){super.__setDefaultConfig();let a=this.config;a.enabled=!0,a.style={"font-family":DEFAULT_FT_FONT,"font-size":'12px',"font-weight":'normal',"font-style":'normal',color:'#5F5F5F'},a.date={day:8,month:10,year:2018}}configureAttributes(a={}){super.configureAttributes(a);let b=this,c=b.config;Object.keys(a).forEach(b=>c[b]=a[b])}getDimension(){let a,b=this,c=b.config,d=b.getFromEnv('smartLabel');return d.setStyle(Object.assign({},c.style)),c.labelDim=a=d.getOriSize(c.label),{width:a.width+DEFAULT_INPUT_BOX_WIDTH,height:d._lineHeight}}setTranslation(a,b){this.config.position={x:a,y:b}}draw(){let a,b=this,c=b.config,d=c.position,e=c.labelDim,f=c.date||{},g=c.style,h=`${formatDate(f.day)}/${formatDate(f.month)}/${formatDate(f.year)}`;b.addGraphicalElement({el:'html',attr:{x:d.x,y:d.y,type:'div',text:c.label},component:b,css:c.style,container:{id:'box-container',label:'box-container',isParent:!0},label:'label',id:'label'}),b.addGraphicalElement({el:'html',attr:{x:d.x+e.width,y:d.y-e.height/3,type:'input',name:c.label,value:h},component:b,css:{fontSize:g['font-size'],fontFamily:g['font-family'],border:'1px solid #efefef',"background-color":'#fcfcfc',color:g.color,width:DEFAULT_INPUT_BOX_WIDTH+PXSTRING,padding:'2px'},container:{id:'box-container',label:'box-container',isParent:!0},label:'box',id:'box'}),a=b.getGraphicalElement('box','box'),a.element.value=h}}export default DateBox;