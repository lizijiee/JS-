import CoreMouseTracker from'../../../../fc-core/src/mouse-tracker';import{getMouseCoordinate}from'../../../../fc-core/src/lib';let _helperFn=function(a){return function(){a.fireEvent('canvasHovered',{hoveredInfo:{},e:{}})}};class MouseTracker extends CoreMouseTracker{constructor(){super(),this.handler=function(a){return function(b){a.mouseEvtHandler(b)}}(this),this.eventsList.push('fc-mouseout')}mouseEvtHandler(a){var b,c,d,e,f,g=this,h=a.originalEvent,j=g.getLinkedParent(),k=j.getChild(void 0,'dataset'),l=j.getChild(void 0,'timeInstanceMarker')[0],m=j.getChild(void 0,'timeSpanMarker')[0],n=k.length;if(b=getMouseCoordinate(g.getFromEnv('chart-container'),h,g.getFromEnv('chart')),c=b.chartX,d=b.chartY,f=l.getHoveredMarker(c,d),f&&f.hovered)return void g.fireEvent('canvasHovered',{hoveredInfo:f,e:a,i:n,chartX:c,chartY:d});if(f&&void 0!==f.previouslyHoveredIndex&&g.fireEvent('canvasHovered',{hoveredInfo:f,e:a,i:n,chartX:c,chartY:d}),f=m.getHoveredMarker(c,d),f&&f.hovered)return void g.fireEvent('canvasHovered',{hoveredInfo:f,e:a,i:n,chartX:c,chartY:d});for(f&&void 0!==f.previouslyHoveredIndex&&g.fireEvent('canvasHovered',{hoveredInfo:f,e:a,i:n,chartX:c,chartY:d});n--;)if(e=k[n],f=e._getHoveredPlot&&e._getHoveredPlot(c,d),f&&f.hovered)return void g.fireEvent('canvasHovered',{hoveredInfo:f,e:a,i:n,chartX:c,chartY:d});g.fireEvent('canvasHovered',{hoveredInfo:f,e:a,chartX:c,chartY:d})}addEvents(){var a,b=this,c=b.getLinkedParent(),d=b.eventsList;for(a in b._removeListners(),d)c.addEventListener(d[a],b.handler);b.addExtEventListener('domainValidated',_helperFn(b),b.getFromEnv('chart'))}_removeListners(){var a,b=this,c=b.getLinkedParent(),d=b.eventsList;for(a in d)c.removeEventListener(d[a],b.handler);b.removeExtEventListener('domainValidated',_helperFn,b.getFromEnv('chart'))}}export default MouseTracker;